{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es7.object.entries.js","webpack:///./node_modules/audiokeys/src/AudioKeys.special.js","webpack:///./node_modules/audiokeys/src/AudioKeys.buffer.js","webpack:///./node_modules/core-js/modules/_typed-array.js","webpack:///./node_modules/core-js/modules/_typed-buffer.js","webpack:///./node_modules/core-js/modules/_to-index.js","webpack:///./node_modules/core-js/modules/_typed.js","webpack:///./node_modules/core-js/modules/es6.typed.uint8-array.js","webpack:///./node_modules/core-js/modules/_array-fill.js","webpack:///./node_modules/audiokeys/src/AudioKeys.events.js","webpack:///./node_modules/audiokeys/src/AudioKeys.mapping.js","webpack:///./node_modules/audiokeys/src/AudioKeys.priority.js","webpack:///./node_modules/core-js/modules/es6.array.fill.js","webpack:///./node_modules/regenerator-runtime/runtime.js","webpack:///./src/layouts/cv2612.js","webpack:///./src/components/cv2612/utils/patches-utils.js","webpack:///./src/components/cv2612/context.js","webpack:///./src/components/cv2612/utils/obj_diff.js","webpack:///./src/components/cv2612/utils/envelopePoints.js","webpack:///./src/components/cv2612/midi-io.js","webpack:///./src/components/cv2612/midi.js","webpack:///./src/components/cv2612/emulator.js","webpack:///./src/components/cv2612/patches.js","webpack:///./src/components/cv2612/envelope.js","webpack:///./src/components/cv2612/slider.js","webpack:///./src/components/cv2612/operator.js","webpack:///./src/components/cv2612/channel.js","webpack:///./src/components/cv2612/utils/algorithmAscii.js","webpack:///./src/components/cv2612/cv_input.js","webpack:///./src/components/cv2612/channels.js","webpack:///./src/components/cv2612/device.js","webpack:///./src/pages/labs/cv2612.js","webpack:///./node_modules/@babel/runtime/regenerator/index.js","webpack:///./node_modules/audiokeys/src/AudioKeys.state.js","webpack:///./node_modules/core-js/modules/es6.typed.int8-array.js","webpack:///./node_modules/core-js/modules/_array-copy-within.js","webpack:///./node_modules/audiokeys/src/AudioKeys.js"],"names":["$export","$entries","S","entries","it","module","exports","_isSpecialKey","keyCode","this","_state","rows","_specialKeyMap","_specialKey","type","octaveControls","octave","value","velocityControls","velocity","90","88","49","50","51","52","53","54","55","56","57","48","_addKey","e","_isNote","_isPressed","newKey","_makeNote","keys","concat","_update","_removeKey","keyToRemove","i","length","splice","indexOf","note","_map","frequency","_toFrequency","clear","self","buffer","forEach","key","_trigger","oldBuffer","_prioritize","_diff","oldNotes","map","newNotes","notesToRemove","push","notesToAdd","LIBRARY","global","fails","$typed","$buffer","ctx","anInstance","propertyDesc","hide","redefineAll","toInteger","toLength","toIndex","toAbsoluteIndex","toPrimitive","has","classof","isObject","toObject","isArrayIter","create","getPrototypeOf","gOPN","f","getIterFn","uid","wks","createArrayMethod","createArrayIncludes","speciesConstructor","ArrayIterators","Iterators","$iterDetect","setSpecies","arrayFill","arrayCopyWithin","$DP","$GOPD","dP","gOPD","RangeError","TypeError","Uint8Array","ArrayProto","Array","$ArrayBuffer","ArrayBuffer","$DataView","DataView","arrayForEach","arrayFilter","arraySome","arrayEvery","arrayFind","arrayFindIndex","arrayIncludes","arrayIndexOf","arrayValues","values","arrayKeys","arrayEntries","arrayLastIndexOf","lastIndexOf","arrayReduce","reduce","arrayReduceRight","reduceRight","arrayJoin","join","arraySort","sort","arraySlice","slice","arrayToString","toString","arrayToLocaleString","toLocaleString","ITERATOR","TAG","TYPED_CONSTRUCTOR","DEF_CONSTRUCTOR","ALL_CONSTRUCTORS","CONSTR","TYPED_ARRAY","TYPED","VIEW","$map","O","allocate","LITTLE_ENDIAN","Uint16Array","FORCED_SET","set","toOffset","BYTES","offset","validate","C","speciesFromList","list","fromList","index","result","addGetter","internal","get","_d","$from","source","step","iterator","aLen","arguments","mapfn","undefined","mapping","iterFn","call","next","done","$of","TO_LOCALE_BUG","$toLocaleString","apply","proto","copyWithin","target","start","every","callbackfn","fill","filter","find","predicate","findIndex","searchElement","includes","separator","reverse","middle","Math","floor","some","comparefn","subarray","begin","end","$begin","byteOffset","BYTES_PER_ELEMENT","$slice","$set","arrayLike","src","len","$iterators","isTAIndex","String","$getDesc","$setDesc","desc","configurable","writable","enumerable","F","getOwnPropertyDescriptor","defineProperty","$TypedArrayPrototype$","constructor","KEY","wrapper","CLAMPED","NAME","GETTER","SETTER","TypedArray","Base","TAC","FORCED","ABV","TypedArrayPrototype","addElement","that","data","v","o","getter","round","setter","$offset","$length","byteLength","klass","$len","b","l","iter","Function","prototype","$nativeIterator","CORRECT_ITER_NAME","name","$iterator","G","W","of","from","P","DESCRIPTORS","setToStringTag","Infinity","BaseBuffer","abs","pow","log","LN2","$BUFFER","$LENGTH","$OFFSET","packIEEE754","mLen","nBytes","m","c","eLen","eMax","eBias","rt","s","unpackIEEE754","nBits","NaN","unpackI32","bytes","packI8","packI16","packI32","packF64","packF32","view","isLittleEndian","intIndex","store","_b","pack","conversion","ArrayBufferProto","j","$setInt8","setInt8","getInt8","setUint8","bufferLength","getUint8","getInt16","getUint16","getInt32","getUint32","getFloat32","getFloat64","setInt16","setUint16","setInt32","setUint32","setFloat32","setFloat64","number","Typed","TypedArrayConstructors","split","init","endPos","down","fn","_listeners","up","action","args","_bind","window","document","addEventListener","lastFocus","setInterval","hasFocus","_keyMap","_offset","rootNote","root","1","65","87","83","69","68","70","84","71","89","72","85","74","75","79","76","80","186","222","2","67","86","66","78","77","188","190","191","81","82","73","219","187","221","polyphony","isActive","priority","_last","_first","_highest","notes","a","Number","MAX_VALUE","_lowest","runtime","Op","Object","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","context","Context","_invoke","state","method","arg","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","makeInvokeMethod","obj","err","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","defineIteratorMethods","AsyncIterator","previousPromise","callInvokeWithMethodAndArg","Promise","resolve","reject","invoke","__await","then","unwrapped","error","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","object","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Layout","render","children","props","id","bodyAttributes","class","title","React","Component","globalParams","ctrlMap","emptyPatch","patch","emptyVoice","params","op","emptyParams","emptyMapping","bitness","param","bits","k","startsWith","CV2612Context","createContext","CV2612Provider","Consumer","handleCC","ch","cc","val","activeParameter","learning","setState","reactLocalStorage","setObject","updateParam","toggleLearning","sendParameter","code","console","midi","sendCC","parts","parseInt","ccOff","ccOff2","emulator","update","voice","voices","sendVoice","unshift","sendSysexSet","sendPatch","setActiveParameter","loadPatch","updateParamsFromVoice","loadingPatch","selectVoice","loadingVoice","envelopes","soundOn","componentDidMount","savedMapping","componentDidUpdate","prevProps","prevState","updateEnvelopesIfChanged","diff","env_params","envs","acc","x","env","x1","ar","y1","tl","x2","d1","y2","sl","x3","d2","rr","p","replace","calculateEnvelopePoints","Provider","MidiIO","callerObject","caller","ma","lastMsg","refresh","inputs","outputs","onmidimessage","onMIDIMessage","onStateChange","sendHandshake2","deviceIdRequest","sendSysex","sendHandshake","idReply","JSON","stringify","sysexPromisePending","sysexPromiseResolve","timeout","setTimeout","clearTimeout","sysexPromise","sendMidi","race","msg","sum","d","midiOut","midiOutId","send","onCtrlMIDIMessage","midiCtrlInId","onControlChange","onNoteOn","onNoteOff","onLoopBack","midiInId","navigator","requestMIDIAccess","sysex","onstatechange","Midi","onChangeMidiIn","ev","onChangeMidiCtrlIn","onChangeMidiOut","io","n","onLearnClick","preventDefault","onPanicClick","onClearClick","onToggleSoundClick","toggleSound","midiIns","midiOuts","connected","array","setMidiOut","pitch","noteOn","noteOff","handshake","className","onBlur","href","onClick","contextType","kb","AudioKeys","Emulator","audioCtx","tick","stopAnimation","drawScope","drawSpectrum","requestAnimationFrame","onKeyDown","onKeyUp","ym2612Node","setFrequency","keyOn","keyOff","cache","ch_off","mask","size","shift","write","suspend","resume","initialize","fftSize","AudioContext","scope","refs","getContext","fillStyle","lineWidth","strokeStyle","spectrum","timeData","freqData","componentWillUnmount","width","canvas","height","scaling","analyser","getByteTimeDomainData","fillRect","beginPath","lineTo","stroke","scalingX","getByteFrequencyData","min","max","exp","logindex","low","high","ceil","lv","audioWorklet","addModule","AudioWorkletNode","outputChannelCount","connect","destination","createAnalyser","block","freq","chan","address","port","postMessage","ref","Patches","addDmpPatch","dmp2voice","addPatch","patches","random","assign","save","onChangeHandler","fr","FileReader","onload","Int8Array","readAsArrayBuffer","files","onChange","current","blur","onSave","onCreate","prompt","onDelete","onLoadDefaults","loadDefaultPatches","onLeftClick","onRightClick","onUploadClick","file","click","r","XMLHttpRequest","onreadystatechange","readyState","status","responseType","response","open","encodeURI","responseText","style","display","accept","multiple","Envelope","useContext","viewBox","xmlns","points","Slider","aria-hidden","Operator","Channel","algorithm","algorithmAscii","CvInput","Channels","onSelectVoice","attributes","Device","CV2612Index","location","_setState","options","_extendState","property","to","count","inc","events","special"],"mappings":"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","file":"component---src-pages-labs-cv-2612-js-0fdbadb64d91b4174dcc.js","sourcesContent":["// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export');\nvar $entries = require('./_object-to-array')(true);\n\n$export($export.S, 'Object', {\n  entries: function entries(it) {\n    return $entries(it);\n  }\n});\n","// This file maps special keys to the state octave shifting and\n// velocity selection, both available when `rows` = 1.\nmodule.exports = {\n  _isSpecialKey: function _isSpecialKey(keyCode) {\n    return this._state.rows === 1 && this._specialKeyMap[keyCode];\n  },\n  _specialKey: function _specialKey(keyCode) {\n    var self = this;\n\n    if (self._specialKeyMap[keyCode].type === 'octave' && self._state.octaveControls) {\n      // shift the state of the `octave`\n      self._state.octave += self._specialKeyMap[keyCode].value;\n    } else if (self._specialKeyMap[keyCode].type === 'velocity' && self._state.velocityControls) {\n      // set the `velocity` to a new value\n      self._state.velocity = self._specialKeyMap[keyCode].value;\n    }\n  },\n  _specialKeyMap: {\n    // octaves\n    90: {\n      type: 'octave',\n      value: -1\n    },\n    88: {\n      type: 'octave',\n      value: 1\n    },\n    // velocity\n    49: {\n      type: 'velocity',\n      value: 1\n    },\n    50: {\n      type: 'velocity',\n      value: 14\n    },\n    51: {\n      type: 'velocity',\n      value: 28\n    },\n    52: {\n      type: 'velocity',\n      value: 42\n    },\n    53: {\n      type: 'velocity',\n      value: 56\n    },\n    54: {\n      type: 'velocity',\n      value: 70\n    },\n    55: {\n      type: 'velocity',\n      value: 84\n    },\n    56: {\n      type: 'velocity',\n      value: 98\n    },\n    57: {\n      type: 'velocity',\n      value: 112\n    },\n    48: {\n      type: 'velocity',\n      value: 127\n    }\n  }\n};","require(\"core-js/modules/es6.array.map\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\n// ================================================================\n// KEY BUFFER\n// ================================================================\n// The process is:\n// key press\n//   add to self._state.keys\n//   (an accurate representation of keys currently pressed)\n// resolve self.buffer\n//   based on polyphony and priority, determine the notes\n//   that get triggered for the user\nmodule.exports = {\n  _addKey: function _addKey(e) {\n    var self = this; // if the keyCode is one that can be mapped and isn't\n    // already pressed, add it to the key object.\n\n    if (self._isNote(e.keyCode) && !self._isPressed(e.keyCode)) {\n      var newKey = self._makeNote(e.keyCode); // add the newKey to the list of keys\n\n\n      self._state.keys = (self._state.keys || []).concat(newKey); // reevaluate the active notes based on our priority rules.\n      // give it the new note to use if there is an event to trigger.\n\n      self._update();\n    } else if (self._isSpecialKey(e.keyCode)) {\n      self._specialKey(e.keyCode);\n    }\n  },\n  _removeKey: function _removeKey(e) {\n    var self = this; // if the keyCode is active, remove it from the key object.\n\n    if (self._isPressed(e.keyCode)) {\n      var keyToRemove;\n\n      for (var i = 0; i < self._state.keys.length; i++) {\n        if (self._state.keys[i].keyCode === e.keyCode) {\n          keyToRemove = self._state.keys[i];\n          break;\n        }\n      } // remove the key from _keys\n\n\n      self._state.keys.splice(self._state.keys.indexOf(keyToRemove), 1);\n\n      self._update();\n    }\n  },\n  _isPressed: function _isPressed(keyCode) {\n    var self = this;\n\n    if (!self._state.keys || !self._state.keys.length) {\n      return false;\n    }\n\n    for (var i = 0; i < self._state.keys.length; i++) {\n      if (self._state.keys[i].keyCode === keyCode) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n  // turn a key object into a note object for the event listeners.\n  _makeNote: function _makeNote(keyCode) {\n    var self = this;\n    return {\n      keyCode: keyCode,\n      note: self._map(keyCode),\n      frequency: self._toFrequency(self._map(keyCode)),\n      velocity: self._state.velocity\n    };\n  },\n  // clear any active notes\n  clear: function clear() {\n    var self = this; // trigger note off for the notes in the buffer before\n    // removing them.\n\n    self._state.buffer.forEach(function (key) {\n      // note up events should have a velocity of 0\n      key.velocity = 0;\n\n      self._trigger('up', key);\n    });\n\n    self._state.keys = [];\n    self._state.buffer = [];\n  },\n  // ================================================================\n  // NOTE BUFFER\n  // ================================================================\n  // every time a change is made to _keys due to a key on or key off\n  // we need to call `_update`. It compares the `_keys` array to the\n  // `buffer` array, which is the array of notes that are really\n  // being played, makes the necessary changes to `buffer` and\n  // triggers any events that need triggering.\n  _update: function _update() {\n    var self = this; // a key has been added to self._state.keys.\n    // stash the old buffer\n\n    var oldBuffer = self._state.buffer; // set the new priority in self.state._keys\n\n    self._prioritize(); // compare the buffers and trigger events based on\n    // the differences.\n\n\n    self._diff(oldBuffer);\n  },\n  _diff: function _diff(oldBuffer) {\n    var self = this; // if it's not in the OLD buffer, it's a note ON.\n    // if it's not in the NEW buffer, it's a note OFF.\n\n    var oldNotes = oldBuffer.map(function (key) {\n      return key.keyCode;\n    });\n\n    var newNotes = self._state.buffer.map(function (key) {\n      return key.keyCode;\n    }); // check for old (removed) notes\n\n\n    var notesToRemove = [];\n    oldNotes.forEach(function (key) {\n      if (newNotes.indexOf(key) === -1) {\n        notesToRemove.push(key);\n      }\n    }); // check for new notes\n\n    var notesToAdd = [];\n    newNotes.forEach(function (key) {\n      if (oldNotes.indexOf(key) === -1) {\n        notesToAdd.push(key);\n      }\n    });\n    notesToAdd.forEach(function (key) {\n      for (var i = 0; i < self._state.buffer.length; i++) {\n        if (self._state.buffer[i].keyCode === key) {\n          self._trigger('down', self._state.buffer[i]);\n\n          break;\n        }\n      }\n    });\n    notesToRemove.forEach(function (key) {\n      // these need to fire the entire object\n      for (var i = 0; i < oldBuffer.length; i++) {\n        if (oldBuffer[i].keyCode === key) {\n          // note up events should have a velocity of 0\n          oldBuffer[i].velocity = 0;\n\n          self._trigger('up', oldBuffer[i]);\n\n          break;\n        }\n      }\n    });\n  }\n};","'use strict';\nif (require('./_descriptors')) {\n  var LIBRARY = require('./_library');\n  var global = require('./_global');\n  var fails = require('./_fails');\n  var $export = require('./_export');\n  var $typed = require('./_typed');\n  var $buffer = require('./_typed-buffer');\n  var ctx = require('./_ctx');\n  var anInstance = require('./_an-instance');\n  var propertyDesc = require('./_property-desc');\n  var hide = require('./_hide');\n  var redefineAll = require('./_redefine-all');\n  var toInteger = require('./_to-integer');\n  var toLength = require('./_to-length');\n  var toIndex = require('./_to-index');\n  var toAbsoluteIndex = require('./_to-absolute-index');\n  var toPrimitive = require('./_to-primitive');\n  var has = require('./_has');\n  var classof = require('./_classof');\n  var isObject = require('./_is-object');\n  var toObject = require('./_to-object');\n  var isArrayIter = require('./_is-array-iter');\n  var create = require('./_object-create');\n  var getPrototypeOf = require('./_object-gpo');\n  var gOPN = require('./_object-gopn').f;\n  var getIterFn = require('./core.get-iterator-method');\n  var uid = require('./_uid');\n  var wks = require('./_wks');\n  var createArrayMethod = require('./_array-methods');\n  var createArrayIncludes = require('./_array-includes');\n  var speciesConstructor = require('./_species-constructor');\n  var ArrayIterators = require('./es6.array.iterator');\n  var Iterators = require('./_iterators');\n  var $iterDetect = require('./_iter-detect');\n  var setSpecies = require('./_set-species');\n  var arrayFill = require('./_array-fill');\n  var arrayCopyWithin = require('./_array-copy-within');\n  var $DP = require('./_object-dp');\n  var $GOPD = require('./_object-gopd');\n  var dP = $DP.f;\n  var gOPD = $GOPD.f;\n  var RangeError = global.RangeError;\n  var TypeError = global.TypeError;\n  var Uint8Array = global.Uint8Array;\n  var ARRAY_BUFFER = 'ArrayBuffer';\n  var SHARED_BUFFER = 'Shared' + ARRAY_BUFFER;\n  var BYTES_PER_ELEMENT = 'BYTES_PER_ELEMENT';\n  var PROTOTYPE = 'prototype';\n  var ArrayProto = Array[PROTOTYPE];\n  var $ArrayBuffer = $buffer.ArrayBuffer;\n  var $DataView = $buffer.DataView;\n  var arrayForEach = createArrayMethod(0);\n  var arrayFilter = createArrayMethod(2);\n  var arraySome = createArrayMethod(3);\n  var arrayEvery = createArrayMethod(4);\n  var arrayFind = createArrayMethod(5);\n  var arrayFindIndex = createArrayMethod(6);\n  var arrayIncludes = createArrayIncludes(true);\n  var arrayIndexOf = createArrayIncludes(false);\n  var arrayValues = ArrayIterators.values;\n  var arrayKeys = ArrayIterators.keys;\n  var arrayEntries = ArrayIterators.entries;\n  var arrayLastIndexOf = ArrayProto.lastIndexOf;\n  var arrayReduce = ArrayProto.reduce;\n  var arrayReduceRight = ArrayProto.reduceRight;\n  var arrayJoin = ArrayProto.join;\n  var arraySort = ArrayProto.sort;\n  var arraySlice = ArrayProto.slice;\n  var arrayToString = ArrayProto.toString;\n  var arrayToLocaleString = ArrayProto.toLocaleString;\n  var ITERATOR = wks('iterator');\n  var TAG = wks('toStringTag');\n  var TYPED_CONSTRUCTOR = uid('typed_constructor');\n  var DEF_CONSTRUCTOR = uid('def_constructor');\n  var ALL_CONSTRUCTORS = $typed.CONSTR;\n  var TYPED_ARRAY = $typed.TYPED;\n  var VIEW = $typed.VIEW;\n  var WRONG_LENGTH = 'Wrong length!';\n\n  var $map = createArrayMethod(1, function (O, length) {\n    return allocate(speciesConstructor(O, O[DEF_CONSTRUCTOR]), length);\n  });\n\n  var LITTLE_ENDIAN = fails(function () {\n    // eslint-disable-next-line no-undef\n    return new Uint8Array(new Uint16Array([1]).buffer)[0] === 1;\n  });\n\n  var FORCED_SET = !!Uint8Array && !!Uint8Array[PROTOTYPE].set && fails(function () {\n    new Uint8Array(1).set({});\n  });\n\n  var toOffset = function (it, BYTES) {\n    var offset = toInteger(it);\n    if (offset < 0 || offset % BYTES) throw RangeError('Wrong offset!');\n    return offset;\n  };\n\n  var validate = function (it) {\n    if (isObject(it) && TYPED_ARRAY in it) return it;\n    throw TypeError(it + ' is not a typed array!');\n  };\n\n  var allocate = function (C, length) {\n    if (!(isObject(C) && TYPED_CONSTRUCTOR in C)) {\n      throw TypeError('It is not a typed array constructor!');\n    } return new C(length);\n  };\n\n  var speciesFromList = function (O, list) {\n    return fromList(speciesConstructor(O, O[DEF_CONSTRUCTOR]), list);\n  };\n\n  var fromList = function (C, list) {\n    var index = 0;\n    var length = list.length;\n    var result = allocate(C, length);\n    while (length > index) result[index] = list[index++];\n    return result;\n  };\n\n  var addGetter = function (it, key, internal) {\n    dP(it, key, { get: function () { return this._d[internal]; } });\n  };\n\n  var $from = function from(source /* , mapfn, thisArg */) {\n    var O = toObject(source);\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var iterFn = getIterFn(O);\n    var i, length, values, result, step, iterator;\n    if (iterFn != undefined && !isArrayIter(iterFn)) {\n      for (iterator = iterFn.call(O), values = [], i = 0; !(step = iterator.next()).done; i++) {\n        values.push(step.value);\n      } O = values;\n    }\n    if (mapping && aLen > 2) mapfn = ctx(mapfn, arguments[2], 2);\n    for (i = 0, length = toLength(O.length), result = allocate(this, length); length > i; i++) {\n      result[i] = mapping ? mapfn(O[i], i) : O[i];\n    }\n    return result;\n  };\n\n  var $of = function of(/* ...items */) {\n    var index = 0;\n    var length = arguments.length;\n    var result = allocate(this, length);\n    while (length > index) result[index] = arguments[index++];\n    return result;\n  };\n\n  // iOS Safari 6.x fails here\n  var TO_LOCALE_BUG = !!Uint8Array && fails(function () { arrayToLocaleString.call(new Uint8Array(1)); });\n\n  var $toLocaleString = function toLocaleString() {\n    return arrayToLocaleString.apply(TO_LOCALE_BUG ? arraySlice.call(validate(this)) : validate(this), arguments);\n  };\n\n  var proto = {\n    copyWithin: function copyWithin(target, start /* , end */) {\n      return arrayCopyWithin.call(validate(this), target, start, arguments.length > 2 ? arguments[2] : undefined);\n    },\n    every: function every(callbackfn /* , thisArg */) {\n      return arrayEvery(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    fill: function fill(value /* , start, end */) { // eslint-disable-line no-unused-vars\n      return arrayFill.apply(validate(this), arguments);\n    },\n    filter: function filter(callbackfn /* , thisArg */) {\n      return speciesFromList(this, arrayFilter(validate(this), callbackfn,\n        arguments.length > 1 ? arguments[1] : undefined));\n    },\n    find: function find(predicate /* , thisArg */) {\n      return arrayFind(validate(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    findIndex: function findIndex(predicate /* , thisArg */) {\n      return arrayFindIndex(validate(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    forEach: function forEach(callbackfn /* , thisArg */) {\n      arrayForEach(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    indexOf: function indexOf(searchElement /* , fromIndex */) {\n      return arrayIndexOf(validate(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    includes: function includes(searchElement /* , fromIndex */) {\n      return arrayIncludes(validate(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    join: function join(separator) { // eslint-disable-line no-unused-vars\n      return arrayJoin.apply(validate(this), arguments);\n    },\n    lastIndexOf: function lastIndexOf(searchElement /* , fromIndex */) { // eslint-disable-line no-unused-vars\n      return arrayLastIndexOf.apply(validate(this), arguments);\n    },\n    map: function map(mapfn /* , thisArg */) {\n      return $map(validate(this), mapfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    reduce: function reduce(callbackfn /* , initialValue */) { // eslint-disable-line no-unused-vars\n      return arrayReduce.apply(validate(this), arguments);\n    },\n    reduceRight: function reduceRight(callbackfn /* , initialValue */) { // eslint-disable-line no-unused-vars\n      return arrayReduceRight.apply(validate(this), arguments);\n    },\n    reverse: function reverse() {\n      var that = this;\n      var length = validate(that).length;\n      var middle = Math.floor(length / 2);\n      var index = 0;\n      var value;\n      while (index < middle) {\n        value = that[index];\n        that[index++] = that[--length];\n        that[length] = value;\n      } return that;\n    },\n    some: function some(callbackfn /* , thisArg */) {\n      return arraySome(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    sort: function sort(comparefn) {\n      return arraySort.call(validate(this), comparefn);\n    },\n    subarray: function subarray(begin, end) {\n      var O = validate(this);\n      var length = O.length;\n      var $begin = toAbsoluteIndex(begin, length);\n      return new (speciesConstructor(O, O[DEF_CONSTRUCTOR]))(\n        O.buffer,\n        O.byteOffset + $begin * O.BYTES_PER_ELEMENT,\n        toLength((end === undefined ? length : toAbsoluteIndex(end, length)) - $begin)\n      );\n    }\n  };\n\n  var $slice = function slice(start, end) {\n    return speciesFromList(this, arraySlice.call(validate(this), start, end));\n  };\n\n  var $set = function set(arrayLike /* , offset */) {\n    validate(this);\n    var offset = toOffset(arguments[1], 1);\n    var length = this.length;\n    var src = toObject(arrayLike);\n    var len = toLength(src.length);\n    var index = 0;\n    if (len + offset > length) throw RangeError(WRONG_LENGTH);\n    while (index < len) this[offset + index] = src[index++];\n  };\n\n  var $iterators = {\n    entries: function entries() {\n      return arrayEntries.call(validate(this));\n    },\n    keys: function keys() {\n      return arrayKeys.call(validate(this));\n    },\n    values: function values() {\n      return arrayValues.call(validate(this));\n    }\n  };\n\n  var isTAIndex = function (target, key) {\n    return isObject(target)\n      && target[TYPED_ARRAY]\n      && typeof key != 'symbol'\n      && key in target\n      && String(+key) == String(key);\n  };\n  var $getDesc = function getOwnPropertyDescriptor(target, key) {\n    return isTAIndex(target, key = toPrimitive(key, true))\n      ? propertyDesc(2, target[key])\n      : gOPD(target, key);\n  };\n  var $setDesc = function defineProperty(target, key, desc) {\n    if (isTAIndex(target, key = toPrimitive(key, true))\n      && isObject(desc)\n      && has(desc, 'value')\n      && !has(desc, 'get')\n      && !has(desc, 'set')\n      // TODO: add validation descriptor w/o calling accessors\n      && !desc.configurable\n      && (!has(desc, 'writable') || desc.writable)\n      && (!has(desc, 'enumerable') || desc.enumerable)\n    ) {\n      target[key] = desc.value;\n      return target;\n    } return dP(target, key, desc);\n  };\n\n  if (!ALL_CONSTRUCTORS) {\n    $GOPD.f = $getDesc;\n    $DP.f = $setDesc;\n  }\n\n  $export($export.S + $export.F * !ALL_CONSTRUCTORS, 'Object', {\n    getOwnPropertyDescriptor: $getDesc,\n    defineProperty: $setDesc\n  });\n\n  if (fails(function () { arrayToString.call({}); })) {\n    arrayToString = arrayToLocaleString = function toString() {\n      return arrayJoin.call(this);\n    };\n  }\n\n  var $TypedArrayPrototype$ = redefineAll({}, proto);\n  redefineAll($TypedArrayPrototype$, $iterators);\n  hide($TypedArrayPrototype$, ITERATOR, $iterators.values);\n  redefineAll($TypedArrayPrototype$, {\n    slice: $slice,\n    set: $set,\n    constructor: function () { /* noop */ },\n    toString: arrayToString,\n    toLocaleString: $toLocaleString\n  });\n  addGetter($TypedArrayPrototype$, 'buffer', 'b');\n  addGetter($TypedArrayPrototype$, 'byteOffset', 'o');\n  addGetter($TypedArrayPrototype$, 'byteLength', 'l');\n  addGetter($TypedArrayPrototype$, 'length', 'e');\n  dP($TypedArrayPrototype$, TAG, {\n    get: function () { return this[TYPED_ARRAY]; }\n  });\n\n  // eslint-disable-next-line max-statements\n  module.exports = function (KEY, BYTES, wrapper, CLAMPED) {\n    CLAMPED = !!CLAMPED;\n    var NAME = KEY + (CLAMPED ? 'Clamped' : '') + 'Array';\n    var GETTER = 'get' + KEY;\n    var SETTER = 'set' + KEY;\n    var TypedArray = global[NAME];\n    var Base = TypedArray || {};\n    var TAC = TypedArray && getPrototypeOf(TypedArray);\n    var FORCED = !TypedArray || !$typed.ABV;\n    var O = {};\n    var TypedArrayPrototype = TypedArray && TypedArray[PROTOTYPE];\n    var getter = function (that, index) {\n      var data = that._d;\n      return data.v[GETTER](index * BYTES + data.o, LITTLE_ENDIAN);\n    };\n    var setter = function (that, index, value) {\n      var data = that._d;\n      if (CLAMPED) value = (value = Math.round(value)) < 0 ? 0 : value > 0xff ? 0xff : value & 0xff;\n      data.v[SETTER](index * BYTES + data.o, value, LITTLE_ENDIAN);\n    };\n    var addElement = function (that, index) {\n      dP(that, index, {\n        get: function () {\n          return getter(this, index);\n        },\n        set: function (value) {\n          return setter(this, index, value);\n        },\n        enumerable: true\n      });\n    };\n    if (FORCED) {\n      TypedArray = wrapper(function (that, data, $offset, $length) {\n        anInstance(that, TypedArray, NAME, '_d');\n        var index = 0;\n        var offset = 0;\n        var buffer, byteLength, length, klass;\n        if (!isObject(data)) {\n          length = toIndex(data);\n          byteLength = length * BYTES;\n          buffer = new $ArrayBuffer(byteLength);\n        } else if (data instanceof $ArrayBuffer || (klass = classof(data)) == ARRAY_BUFFER || klass == SHARED_BUFFER) {\n          buffer = data;\n          offset = toOffset($offset, BYTES);\n          var $len = data.byteLength;\n          if ($length === undefined) {\n            if ($len % BYTES) throw RangeError(WRONG_LENGTH);\n            byteLength = $len - offset;\n            if (byteLength < 0) throw RangeError(WRONG_LENGTH);\n          } else {\n            byteLength = toLength($length) * BYTES;\n            if (byteLength + offset > $len) throw RangeError(WRONG_LENGTH);\n          }\n          length = byteLength / BYTES;\n        } else if (TYPED_ARRAY in data) {\n          return fromList(TypedArray, data);\n        } else {\n          return $from.call(TypedArray, data);\n        }\n        hide(that, '_d', {\n          b: buffer,\n          o: offset,\n          l: byteLength,\n          e: length,\n          v: new $DataView(buffer)\n        });\n        while (index < length) addElement(that, index++);\n      });\n      TypedArrayPrototype = TypedArray[PROTOTYPE] = create($TypedArrayPrototype$);\n      hide(TypedArrayPrototype, 'constructor', TypedArray);\n    } else if (!fails(function () {\n      TypedArray(1);\n    }) || !fails(function () {\n      new TypedArray(-1); // eslint-disable-line no-new\n    }) || !$iterDetect(function (iter) {\n      new TypedArray(); // eslint-disable-line no-new\n      new TypedArray(null); // eslint-disable-line no-new\n      new TypedArray(1.5); // eslint-disable-line no-new\n      new TypedArray(iter); // eslint-disable-line no-new\n    }, true)) {\n      TypedArray = wrapper(function (that, data, $offset, $length) {\n        anInstance(that, TypedArray, NAME);\n        var klass;\n        // `ws` module bug, temporarily remove validation length for Uint8Array\n        // https://github.com/websockets/ws/pull/645\n        if (!isObject(data)) return new Base(toIndex(data));\n        if (data instanceof $ArrayBuffer || (klass = classof(data)) == ARRAY_BUFFER || klass == SHARED_BUFFER) {\n          return $length !== undefined\n            ? new Base(data, toOffset($offset, BYTES), $length)\n            : $offset !== undefined\n              ? new Base(data, toOffset($offset, BYTES))\n              : new Base(data);\n        }\n        if (TYPED_ARRAY in data) return fromList(TypedArray, data);\n        return $from.call(TypedArray, data);\n      });\n      arrayForEach(TAC !== Function.prototype ? gOPN(Base).concat(gOPN(TAC)) : gOPN(Base), function (key) {\n        if (!(key in TypedArray)) hide(TypedArray, key, Base[key]);\n      });\n      TypedArray[PROTOTYPE] = TypedArrayPrototype;\n      if (!LIBRARY) TypedArrayPrototype.constructor = TypedArray;\n    }\n    var $nativeIterator = TypedArrayPrototype[ITERATOR];\n    var CORRECT_ITER_NAME = !!$nativeIterator\n      && ($nativeIterator.name == 'values' || $nativeIterator.name == undefined);\n    var $iterator = $iterators.values;\n    hide(TypedArray, TYPED_CONSTRUCTOR, true);\n    hide(TypedArrayPrototype, TYPED_ARRAY, NAME);\n    hide(TypedArrayPrototype, VIEW, true);\n    hide(TypedArrayPrototype, DEF_CONSTRUCTOR, TypedArray);\n\n    if (CLAMPED ? new TypedArray(1)[TAG] != NAME : !(TAG in TypedArrayPrototype)) {\n      dP(TypedArrayPrototype, TAG, {\n        get: function () { return NAME; }\n      });\n    }\n\n    O[NAME] = TypedArray;\n\n    $export($export.G + $export.W + $export.F * (TypedArray != Base), O);\n\n    $export($export.S, NAME, {\n      BYTES_PER_ELEMENT: BYTES\n    });\n\n    $export($export.S + $export.F * fails(function () { Base.of.call(TypedArray, 1); }), NAME, {\n      from: $from,\n      of: $of\n    });\n\n    if (!(BYTES_PER_ELEMENT in TypedArrayPrototype)) hide(TypedArrayPrototype, BYTES_PER_ELEMENT, BYTES);\n\n    $export($export.P, NAME, proto);\n\n    setSpecies(NAME);\n\n    $export($export.P + $export.F * FORCED_SET, NAME, { set: $set });\n\n    $export($export.P + $export.F * !CORRECT_ITER_NAME, NAME, $iterators);\n\n    if (!LIBRARY && TypedArrayPrototype.toString != arrayToString) TypedArrayPrototype.toString = arrayToString;\n\n    $export($export.P + $export.F * fails(function () {\n      new TypedArray(1).slice();\n    }), NAME, { slice: $slice });\n\n    $export($export.P + $export.F * (fails(function () {\n      return [1, 2].toLocaleString() != new TypedArray([1, 2]).toLocaleString();\n    }) || !fails(function () {\n      TypedArrayPrototype.toLocaleString.call([1, 2]);\n    })), NAME, { toLocaleString: $toLocaleString });\n\n    Iterators[NAME] = CORRECT_ITER_NAME ? $nativeIterator : $iterator;\n    if (!LIBRARY && !CORRECT_ITER_NAME) hide(TypedArrayPrototype, ITERATOR, $iterator);\n  };\n} else module.exports = function () { /* empty */ };\n","'use strict';\nvar global = require('./_global');\nvar DESCRIPTORS = require('./_descriptors');\nvar LIBRARY = require('./_library');\nvar $typed = require('./_typed');\nvar hide = require('./_hide');\nvar redefineAll = require('./_redefine-all');\nvar fails = require('./_fails');\nvar anInstance = require('./_an-instance');\nvar toInteger = require('./_to-integer');\nvar toLength = require('./_to-length');\nvar toIndex = require('./_to-index');\nvar gOPN = require('./_object-gopn').f;\nvar dP = require('./_object-dp').f;\nvar arrayFill = require('./_array-fill');\nvar setToStringTag = require('./_set-to-string-tag');\nvar ARRAY_BUFFER = 'ArrayBuffer';\nvar DATA_VIEW = 'DataView';\nvar PROTOTYPE = 'prototype';\nvar WRONG_LENGTH = 'Wrong length!';\nvar WRONG_INDEX = 'Wrong index!';\nvar $ArrayBuffer = global[ARRAY_BUFFER];\nvar $DataView = global[DATA_VIEW];\nvar Math = global.Math;\nvar RangeError = global.RangeError;\n// eslint-disable-next-line no-shadow-restricted-names\nvar Infinity = global.Infinity;\nvar BaseBuffer = $ArrayBuffer;\nvar abs = Math.abs;\nvar pow = Math.pow;\nvar floor = Math.floor;\nvar log = Math.log;\nvar LN2 = Math.LN2;\nvar BUFFER = 'buffer';\nvar BYTE_LENGTH = 'byteLength';\nvar BYTE_OFFSET = 'byteOffset';\nvar $BUFFER = DESCRIPTORS ? '_b' : BUFFER;\nvar $LENGTH = DESCRIPTORS ? '_l' : BYTE_LENGTH;\nvar $OFFSET = DESCRIPTORS ? '_o' : BYTE_OFFSET;\n\n// IEEE754 conversions based on https://github.com/feross/ieee754\nfunction packIEEE754(value, mLen, nBytes) {\n  var buffer = new Array(nBytes);\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var rt = mLen === 23 ? pow(2, -24) - pow(2, -77) : 0;\n  var i = 0;\n  var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n  var e, m, c;\n  value = abs(value);\n  // eslint-disable-next-line no-self-compare\n  if (value != value || value === Infinity) {\n    // eslint-disable-next-line no-self-compare\n    m = value != value ? 1 : 0;\n    e = eMax;\n  } else {\n    e = floor(log(value) / LN2);\n    if (value * (c = pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * pow(2, 1 - eBias);\n    }\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * pow(2, eBias - 1) * pow(2, mLen);\n      e = 0;\n    }\n  }\n  for (; mLen >= 8; buffer[i++] = m & 255, m /= 256, mLen -= 8);\n  e = e << mLen | m;\n  eLen += mLen;\n  for (; eLen > 0; buffer[i++] = e & 255, e /= 256, eLen -= 8);\n  buffer[--i] |= s * 128;\n  return buffer;\n}\nfunction unpackIEEE754(buffer, mLen, nBytes) {\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var nBits = eLen - 7;\n  var i = nBytes - 1;\n  var s = buffer[i--];\n  var e = s & 127;\n  var m;\n  s >>= 7;\n  for (; nBits > 0; e = e * 256 + buffer[i], i--, nBits -= 8);\n  m = e & (1 << -nBits) - 1;\n  e >>= -nBits;\n  nBits += mLen;\n  for (; nBits > 0; m = m * 256 + buffer[i], i--, nBits -= 8);\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : s ? -Infinity : Infinity;\n  } else {\n    m = m + pow(2, mLen);\n    e = e - eBias;\n  } return (s ? -1 : 1) * m * pow(2, e - mLen);\n}\n\nfunction unpackI32(bytes) {\n  return bytes[3] << 24 | bytes[2] << 16 | bytes[1] << 8 | bytes[0];\n}\nfunction packI8(it) {\n  return [it & 0xff];\n}\nfunction packI16(it) {\n  return [it & 0xff, it >> 8 & 0xff];\n}\nfunction packI32(it) {\n  return [it & 0xff, it >> 8 & 0xff, it >> 16 & 0xff, it >> 24 & 0xff];\n}\nfunction packF64(it) {\n  return packIEEE754(it, 52, 8);\n}\nfunction packF32(it) {\n  return packIEEE754(it, 23, 4);\n}\n\nfunction addGetter(C, key, internal) {\n  dP(C[PROTOTYPE], key, { get: function () { return this[internal]; } });\n}\n\nfunction get(view, bytes, index, isLittleEndian) {\n  var numIndex = +index;\n  var intIndex = toIndex(numIndex);\n  if (intIndex + bytes > view[$LENGTH]) throw RangeError(WRONG_INDEX);\n  var store = view[$BUFFER]._b;\n  var start = intIndex + view[$OFFSET];\n  var pack = store.slice(start, start + bytes);\n  return isLittleEndian ? pack : pack.reverse();\n}\nfunction set(view, bytes, index, conversion, value, isLittleEndian) {\n  var numIndex = +index;\n  var intIndex = toIndex(numIndex);\n  if (intIndex + bytes > view[$LENGTH]) throw RangeError(WRONG_INDEX);\n  var store = view[$BUFFER]._b;\n  var start = intIndex + view[$OFFSET];\n  var pack = conversion(+value);\n  for (var i = 0; i < bytes; i++) store[start + i] = pack[isLittleEndian ? i : bytes - i - 1];\n}\n\nif (!$typed.ABV) {\n  $ArrayBuffer = function ArrayBuffer(length) {\n    anInstance(this, $ArrayBuffer, ARRAY_BUFFER);\n    var byteLength = toIndex(length);\n    this._b = arrayFill.call(new Array(byteLength), 0);\n    this[$LENGTH] = byteLength;\n  };\n\n  $DataView = function DataView(buffer, byteOffset, byteLength) {\n    anInstance(this, $DataView, DATA_VIEW);\n    anInstance(buffer, $ArrayBuffer, DATA_VIEW);\n    var bufferLength = buffer[$LENGTH];\n    var offset = toInteger(byteOffset);\n    if (offset < 0 || offset > bufferLength) throw RangeError('Wrong offset!');\n    byteLength = byteLength === undefined ? bufferLength - offset : toLength(byteLength);\n    if (offset + byteLength > bufferLength) throw RangeError(WRONG_LENGTH);\n    this[$BUFFER] = buffer;\n    this[$OFFSET] = offset;\n    this[$LENGTH] = byteLength;\n  };\n\n  if (DESCRIPTORS) {\n    addGetter($ArrayBuffer, BYTE_LENGTH, '_l');\n    addGetter($DataView, BUFFER, '_b');\n    addGetter($DataView, BYTE_LENGTH, '_l');\n    addGetter($DataView, BYTE_OFFSET, '_o');\n  }\n\n  redefineAll($DataView[PROTOTYPE], {\n    getInt8: function getInt8(byteOffset) {\n      return get(this, 1, byteOffset)[0] << 24 >> 24;\n    },\n    getUint8: function getUint8(byteOffset) {\n      return get(this, 1, byteOffset)[0];\n    },\n    getInt16: function getInt16(byteOffset /* , littleEndian */) {\n      var bytes = get(this, 2, byteOffset, arguments[1]);\n      return (bytes[1] << 8 | bytes[0]) << 16 >> 16;\n    },\n    getUint16: function getUint16(byteOffset /* , littleEndian */) {\n      var bytes = get(this, 2, byteOffset, arguments[1]);\n      return bytes[1] << 8 | bytes[0];\n    },\n    getInt32: function getInt32(byteOffset /* , littleEndian */) {\n      return unpackI32(get(this, 4, byteOffset, arguments[1]));\n    },\n    getUint32: function getUint32(byteOffset /* , littleEndian */) {\n      return unpackI32(get(this, 4, byteOffset, arguments[1])) >>> 0;\n    },\n    getFloat32: function getFloat32(byteOffset /* , littleEndian */) {\n      return unpackIEEE754(get(this, 4, byteOffset, arguments[1]), 23, 4);\n    },\n    getFloat64: function getFloat64(byteOffset /* , littleEndian */) {\n      return unpackIEEE754(get(this, 8, byteOffset, arguments[1]), 52, 8);\n    },\n    setInt8: function setInt8(byteOffset, value) {\n      set(this, 1, byteOffset, packI8, value);\n    },\n    setUint8: function setUint8(byteOffset, value) {\n      set(this, 1, byteOffset, packI8, value);\n    },\n    setInt16: function setInt16(byteOffset, value /* , littleEndian */) {\n      set(this, 2, byteOffset, packI16, value, arguments[2]);\n    },\n    setUint16: function setUint16(byteOffset, value /* , littleEndian */) {\n      set(this, 2, byteOffset, packI16, value, arguments[2]);\n    },\n    setInt32: function setInt32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packI32, value, arguments[2]);\n    },\n    setUint32: function setUint32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packI32, value, arguments[2]);\n    },\n    setFloat32: function setFloat32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packF32, value, arguments[2]);\n    },\n    setFloat64: function setFloat64(byteOffset, value /* , littleEndian */) {\n      set(this, 8, byteOffset, packF64, value, arguments[2]);\n    }\n  });\n} else {\n  if (!fails(function () {\n    $ArrayBuffer(1);\n  }) || !fails(function () {\n    new $ArrayBuffer(-1); // eslint-disable-line no-new\n  }) || fails(function () {\n    new $ArrayBuffer(); // eslint-disable-line no-new\n    new $ArrayBuffer(1.5); // eslint-disable-line no-new\n    new $ArrayBuffer(NaN); // eslint-disable-line no-new\n    return $ArrayBuffer.name != ARRAY_BUFFER;\n  })) {\n    $ArrayBuffer = function ArrayBuffer(length) {\n      anInstance(this, $ArrayBuffer);\n      return new BaseBuffer(toIndex(length));\n    };\n    var ArrayBufferProto = $ArrayBuffer[PROTOTYPE] = BaseBuffer[PROTOTYPE];\n    for (var keys = gOPN(BaseBuffer), j = 0, key; keys.length > j;) {\n      if (!((key = keys[j++]) in $ArrayBuffer)) hide($ArrayBuffer, key, BaseBuffer[key]);\n    }\n    if (!LIBRARY) ArrayBufferProto.constructor = $ArrayBuffer;\n  }\n  // iOS Safari 7.x bug\n  var view = new $DataView(new $ArrayBuffer(2));\n  var $setInt8 = $DataView[PROTOTYPE].setInt8;\n  view.setInt8(0, 2147483648);\n  view.setInt8(1, 2147483649);\n  if (view.getInt8(0) || !view.getInt8(1)) redefineAll($DataView[PROTOTYPE], {\n    setInt8: function setInt8(byteOffset, value) {\n      $setInt8.call(this, byteOffset, value << 24 >> 24);\n    },\n    setUint8: function setUint8(byteOffset, value) {\n      $setInt8.call(this, byteOffset, value << 24 >> 24);\n    }\n  }, true);\n}\nsetToStringTag($ArrayBuffer, ARRAY_BUFFER);\nsetToStringTag($DataView, DATA_VIEW);\nhide($DataView[PROTOTYPE], $typed.VIEW, true);\nexports[ARRAY_BUFFER] = $ArrayBuffer;\nexports[DATA_VIEW] = $DataView;\n","// https://tc39.github.io/ecma262/#sec-toindex\nvar toInteger = require('./_to-integer');\nvar toLength = require('./_to-length');\nmodule.exports = function (it) {\n  if (it === undefined) return 0;\n  var number = toInteger(it);\n  var length = toLength(number);\n  if (number !== length) throw RangeError('Wrong length!');\n  return length;\n};\n","var global = require('./_global');\nvar hide = require('./_hide');\nvar uid = require('./_uid');\nvar TYPED = uid('typed_array');\nvar VIEW = uid('view');\nvar ABV = !!(global.ArrayBuffer && global.DataView);\nvar CONSTR = ABV;\nvar i = 0;\nvar l = 9;\nvar Typed;\n\nvar TypedArrayConstructors = (\n  'Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array'\n).split(',');\n\nwhile (i < l) {\n  if (Typed = global[TypedArrayConstructors[i++]]) {\n    hide(Typed.prototype, TYPED, true);\n    hide(Typed.prototype, VIEW, true);\n  } else CONSTR = false;\n}\n\nmodule.exports = {\n  ABV: ABV,\n  CONSTR: CONSTR,\n  TYPED: TYPED,\n  VIEW: VIEW\n};\n","require('./_typed-array')('Uint8', 1, function (init) {\n  return function Uint8Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\n'use strict';\nvar toObject = require('./_to-object');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var aLen = arguments.length;\n  var index = toAbsoluteIndex(aLen > 1 ? arguments[1] : undefined, length);\n  var end = aLen > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","require(\"core-js/modules/es6.array.for-each\");\n\n// ================================================================\n// Event Listeners\n// ================================================================\n// AudioKeys has a very simple event handling system. Internally\n// we'll call self._trigger('down', argument) when we want to fire\n// an event for the user.\nmodule.exports = {\n  down: function down(fn) {\n    var self = this; // add the function to our list of listeners\n\n    self._listeners.down = (self._listeners.down || []).concat(fn);\n  },\n  up: function up(fn) {\n    var self = this; // add the function to our list of listeners\n\n    self._listeners.up = (self._listeners.up || []).concat(fn);\n  },\n  _trigger: function _trigger(action\n  /* args */\n  ) {\n    var self = this; // if we have any listeners by this name ...\n\n    if (self._listeners[action] && self._listeners[action].length) {\n      // grab the arguments to pass to the listeners ...\n      var args = Array.prototype.slice.call(arguments);\n      args.splice(0, 1); // and call them!\n\n      self._listeners[action].forEach(function (fn) {\n        fn.apply(self, args);\n      });\n    }\n  },\n  // ================================================================\n  // DOM Bindings\n  // ================================================================\n  _bind: function _bind() {\n    var self = this;\n\n    if (typeof window !== 'undefined' && window.document) {\n      window.document.addEventListener('keydown', function (e) {\n        self._addKey(e);\n      });\n      window.document.addEventListener('keyup', function (e) {\n        self._removeKey(e);\n      });\n      var lastFocus = true;\n      setInterval(function () {\n        if (window.document.hasFocus() === lastFocus) {\n          return;\n        }\n\n        lastFocus = !lastFocus;\n\n        if (!lastFocus) {\n          self.clear();\n        }\n      }, 100);\n    }\n  }\n};","module.exports = {\n  // _map returns the midi note for a given keyCode.\n  _map: function _map(keyCode) {\n    return this._keyMap[this._state.rows][keyCode] + this._offset();\n  },\n  _offset: function _offset() {\n    return this._state.rootNote - this._keyMap[this._state.rows].root + this._state.octave * 12;\n  },\n  // _isNote determines whether a keyCode is a note or not.\n  _isNote: function _isNote(keyCode) {\n    return !!this._keyMap[this._state.rows][keyCode];\n  },\n  // convert a midi note to a frequency. we assume here that _map has\n  // already been called (to account for a potential rootNote offset)\n  _toFrequency: function _toFrequency(note) {\n    return Math.pow(2, (note - 69) / 12) * 440.0;\n  },\n  // the object keys correspond to `rows`, so `_keyMap[rows]` should\n  // retrieve that particular mapping.\n  _keyMap: {\n    1: {\n      root: 60,\n      // starting with the 'a' key\n      65: 60,\n      87: 61,\n      83: 62,\n      69: 63,\n      68: 64,\n      70: 65,\n      84: 66,\n      71: 67,\n      89: 68,\n      72: 69,\n      85: 70,\n      74: 71,\n      75: 72,\n      79: 73,\n      76: 74,\n      80: 75,\n      186: 76,\n      222: 77\n    },\n    2: {\n      root: 60,\n      // bottom row\n      90: 60,\n      83: 61,\n      88: 62,\n      68: 63,\n      67: 64,\n      86: 65,\n      71: 66,\n      66: 67,\n      72: 68,\n      78: 69,\n      74: 70,\n      77: 71,\n      188: 72,\n      76: 73,\n      190: 74,\n      186: 75,\n      191: 76,\n      // top row\n      81: 72,\n      50: 73,\n      87: 74,\n      51: 75,\n      69: 76,\n      82: 77,\n      53: 78,\n      84: 79,\n      54: 80,\n      89: 81,\n      55: 82,\n      85: 83,\n      73: 84,\n      57: 85,\n      79: 86,\n      48: 87,\n      80: 88,\n      219: 89,\n      187: 90,\n      221: 91\n    }\n  }\n};","require(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.array.map\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nmodule.exports = {\n  _prioritize: function _prioritize() {\n    var self = this; // if all the keys have been turned off, no need\n    // to do anything here.\n\n    if (!self._state.keys.length) {\n      self._state.buffer = [];\n      return;\n    }\n\n    if (self._state.polyphony >= self._state.keys.length) {\n      // every note is active\n      self._state.keys = self._state.keys.map(function (key) {\n        key.isActive = true;\n        return key;\n      });\n    } else {\n      // set all keys to inactive.\n      self._state.keys = self._state.keys.map(function (key) {\n        key.isActive = false;\n        return key;\n      });\n\n      self['_' + self._state.priority]();\n    } // now take the isActive keys and set the new buffer.\n\n\n    self._state.buffer = [];\n\n    self._state.keys.forEach(function (key) {\n      if (key.isActive) {\n        self._state.buffer.push(key);\n      }\n    }); // done.\n\n  },\n  _last: function _last() {\n    var self = this; // set the last bunch to active based on the polyphony.\n\n    for (var i = self._state.keys.length - self._state.polyphony; i < self._state.keys.length; i++) {\n      self._state.keys[i].isActive = true;\n    }\n  },\n  _first: function _first() {\n    var self = this; // set the last bunch to active based on the polyphony.\n\n    for (var i = 0; i < self._state.polyphony; i++) {\n      self._state.keys[i].isActive = true;\n    }\n  },\n  _highest: function _highest() {\n    var self = this; // get the highest notes and set them to active\n\n    var notes = self._state.keys.map(function (key) {\n      return key.note;\n    });\n\n    notes.sort(function (b, a) {\n      if (a === b) {\n        return 0;\n      }\n\n      return a < b ? -1 : 1;\n    });\n    notes.splice(self._state.polyphony, Number.MAX_VALUE);\n\n    self._state.keys.forEach(function (key) {\n      if (notes.indexOf(key.note) !== -1) {\n        key.isActive = true;\n      }\n    });\n  },\n  _lowest: function _lowest() {\n    var self = this; // get the lowest notes and set them to active\n\n    var notes = self._state.keys.map(function (key) {\n      return key.note;\n    });\n\n    notes.sort(function (a, b) {\n      if (a === b) {\n        return 0;\n      }\n\n      return a < b ? -1 : 1;\n    });\n    notes.splice(self._state.polyphony, Number.MAX_VALUE);\n\n    self._state.keys.forEach(function (key) {\n      if (notes.indexOf(key.note) !== -1) {\n        key.isActive = true;\n      }\n    });\n  }\n};","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\nvar $export = require('./_export');\n\n$export($export.P, 'Array', { fill: require('./_array-fill') });\n\nrequire('./_add-to-unscopables')('fill');\n","require(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.promise\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.set-prototype-of\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.object.create\");\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\n/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nvar runtime = function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []); // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n    return generator;\n  }\n\n  exports.wrap = wrap; // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\"; // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n\n  var ContinueSentinel = {}; // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n\n  function Generator() {}\n\n  function GeneratorFunction() {}\n\n  function GeneratorFunctionPrototype() {} // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n\n\n  var IteratorPrototype = {};\n\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n\n  if (NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] = GeneratorFunction.displayName = \"GeneratorFunction\"; // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      prototype[method] = function (arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function (genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor ? ctor === GeneratorFunction || // For the native GeneratorFunction constructor, the best we can\n    // do is to check its .name property.\n    (ctor.displayName || ctor.name) === \"GeneratorFunction\" : false;\n  };\n\n  exports.mark = function (genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  }; // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n\n\n  exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n\n        if (value && typeof value === \"object\" && hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function (value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function (err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function (unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function (error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise = // If enqueue has been called before, then we want to wait until\n      // all previous Promises have been resolved before calling invoke,\n      // so that results are always delivered in the correct order. If\n      // enqueue has not been called before, then it is important to\n      // call invoke immediately, without waiting on a callback to fire,\n      // so that the async generator function has the opportunity to do\n      // any necessary setup in a predictable way. This predictability\n      // is why the Promise constructor synchronously invokes its\n      // executor callback, and why async functions synchronously\n      // execute code before the first await. Since we implement simple\n      // async functions in terms of async generators, it is especially\n      // important to get this right, even though it requires care.\n      previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, // Avoid propagating failures to Promises returned by later\n      // invocations of the iterator.\n      callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    } // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n\n\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n\n  exports.AsyncIterator = AsyncIterator; // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n\n  exports.async = function (innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList));\n    return exports.isGeneratorFunction(outerFn) ? iter // If outerFn is a generator, return the full iterator.\n    : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        } // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n\n\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n        var record = tryCatch(innerFn, self, context);\n\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done ? GenStateCompleted : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted; // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  } // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n\n\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (!info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value; // Resume execution at the desired location (see delegateYield).\n\n      context.next = delegate.nextLoc; // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    } // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n\n\n    context.delegate = null;\n    return ContinueSentinel;\n  } // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n\n\n  defineIteratorMethods(Gp);\n  Gp[toStringTagSymbol] = \"Generator\"; // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n\n  Gp[iteratorSymbol] = function () {\n    return this;\n  };\n\n  Gp.toString = function () {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function (object) {\n    var keys = [];\n\n    for (var key in object) {\n      keys.push(key);\n    }\n\n    keys.reverse(); // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      } // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n\n\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n          return next;\n        };\n\n        return next.next = next;\n      }\n    } // Return an iterator with no values.\n\n\n    return {\n      next: doneResult\n    };\n  }\n\n  exports.values = values;\n\n  function doneResult() {\n    return {\n      value: undefined,\n      done: true\n    };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      this.prev = 0;\n      this.next = 0; // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n      this.method = \"next\";\n      this.arg = undefined;\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" && hasOwn.call(this, name) && !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n    stop: function stop() {\n      this.done = true;\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry && (type === \"break\" || type === \"continue\") && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" || record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n\n          return thrown;\n        }\n      } // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n\n\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  }; // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n\n  return exports;\n}( // If this script is executing as a CommonJS module, use module.exports\n// as the regeneratorRuntime namespace. Otherwise create a new empty\n// object. Either way, the resulting object will be used to initialize\n// the regeneratorRuntime variable at the top of this file.\ntypeof module === \"object\" ? module.exports : {});\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}","import React from \"react\"\nimport Brand from \"../components/header/brand\"\nimport Helmet from \"react-helmet\"\nimport \"../components/i18n\"\n\n\nclass Layout extends React.Component {\n\n  render() {\n    const { children } = this.props\n\n    return (\n      <div id=\"app\">\n        <header>\n          <Helmet bodyAttributes={{class:'dark cv2612'}} />\n          <Brand title=\"diego dorado\"/>\n        </header>\n        <main>{children}</main>\n      </div>\n    )\n  }\n}\n\nexport default Layout\n","\nexport const globalParams = ['lfo','play-mode','cc-mode','x','y','z','vel-sensitivity','rgb-intensity']\n\nexport const ctrlMap = ['ar','d1','sl','d2','rr','tl','mul','det','rs','am','al','fb','ams','fms','st','lfo']\n\n//rename to defaultParams\nexport const emptyPatch = () =>{\n  const patch = {}\n\n  for (let g of globalParams) {\n    patch[g] = 0\n  }\n\n  patch[`voices`] = []\n  for(let i=0;i<6;i++){\n    patch[`voices`][i] = emptyVoice()\n  }\n  patch[`name`] = 'empty'\n  return patch\n}\n\n\n\n//rename to defaultParams\nexport const emptyVoice = () =>{\n  const params = {}\n\n  params[`fms`] = 0\n  params[`fb`] = 0\n  params[`al`] = 0\n  params[`ams`] = 0\n  params[`st`] = 3\n  for(let op=0;op<4;op++){\n    params[`mul_${op}`] = 0\n    params[`tl_${op}`] = 0\n    params[`ar_${op}`] = 0\n    params[`d1_${op}`] = 0\n    params[`sl_${op}`] = 0\n    params[`rr_${op}`] = 0\n    params[`am_${op}`] = 0\n    params[`rs_${op}`] = 0\n    params[`det_${op}`] = 0\n    params[`d2_${op}`] = 0\n  }\n  return params\n}\n\nexport const emptyParams = () =>{\n  const params = emptyVoice()\n  for (let g of globalParams) {\n    params[g] = 0\n  }\n  return params\n}\n\n\nexport const emptyMapping = () =>{\n\n  const mapping = emptyParams()\n  for (let key in mapping) {\n    mapping[key] = null\n  }\n  return mapping\n}\n\n\nexport const dmp2voice = (name,d) =>{\n    //version 9 or 11, genesis, FM patch\n    if( (d[0]===0x09 && d[1]===0x01 && d[2]===0x00)\n        || ( d[0]===0x0B && d[1]===0x02 && d[2]===0x01) ){\n\n        /*\n\n        http://www.deflemask.com/DMP_SPECS.txt\n\n        1 Byte: LFO (FMS on YM2612, PMS on YM2151)\n        1 Byte: FB\n        1 Byte: ALG\n        1 Byte: LFO2 (AMS on YM2612, AMS on YM2151)\n        Repeat this TOTAL_OPERATORS times\n          1 Byte: MULT\n          1 Byte: TL\n          1 Byte: AR\n          1 Byte: DR\n          1 Byte: SL\n          1 Byte: RR\n          1 Byte: AM\n          1 Byte: RS\n          1 Byte: DT (DT2<<4 | DT on YM2151)\n          1 Byte: D2R\n          1 Byte: SSGEG_Enabled <<3 | SSGEG\n          */\n          const params = emptyVoice()\n\n          params[`fms`] = d[3]\n          params[`fb`] = d[4]\n          params[`al`] = d[5]\n          params[`ams`] = d[6]\n          for(let op=0;op<4;op++){\n            const o = op*11+7\n\n            params[`mul_${op}`] = d[o+0]\n            params[`tl_${op}`] = d[o+1]\n            params[`ar_${op}`] = d[o+2]\n            params[`d1_${op}`] = d[o+3]\n            params[`sl_${op}`] = d[o+4]\n            params[`rr_${op}`] = d[o+5]\n            params[`am_${op}`] = d[o+6]\n            params[`rs_${op}`] = d[o+7]\n            params[`det_${op}`] = d[o+8]\n            params[`d2_${op}`] = d[o+9]\n          }\n\n          return params\n    }\n    //else\n    return null\n\n}\n\n\nexport const bitness = (param) =>{\n  const groups = [\n    ['am','en'],\n    ['rs','st','ams'],\n    ['det','al','fb','fms','lfo'],\n    ['sl','rr','mul'],\n    ['ar','d2','d1'],\n    [],\n    ['tl'],\n  ]\n  let bits = 1\n  for(let group of groups){\n    if (group.some((k) => param.startsWith(k)))\n      return bits\n    bits++\n  }\n  //default bitness\n  return 7\n}\n","import React from \"react\"\nimport {ctrlMap, globalParams, emptyPatch, emptyParams, emptyMapping, bitness} from \"./utils/patches-utils\"\nimport {calculateEnvelopePoints} from \"./utils/envelopePoints\"\nimport obj_diff from \"./utils/obj_diff\"\nimport {reactLocalStorage} from 'reactjs-localstorage'\n\nexport const CV2612Context = React.createContext()\nexport const CV2612Consumer = CV2612Context.Consumer\n\n// Create the provider using a traditional React.Component class\nexport class CV2612Provider extends React.Component {\n\n  constructor(props){\n    super(props);\n\n    //no render tied, so keep away from state\n    this.patch = emptyPatch()\n\n    this.state = {\n      midi: null,\n      emulator: null,\n      learning: false,\n      activeParameter: null,\n      envelopes: {},\n      mapping: emptyMapping(),\n      params: emptyParams(),\n      voice: 0,\n      soundOn: false,\n      setActiveParameter: this.setActiveParameter,\n      updateParam: this.updateParam,\n      sendVoice: this.sendVoice,\n      loadPatch: this.loadPatch,\n      selectVoice: this.selectVoice,\n      toggleLearning: this.toggleLearning,\n      handleCC: this.handleCC,\n    }\n  }\n\n  componentDidMount(){\n    const savedMapping = {} // reactLocalStorage.getObject('mapping',{})\n    if(Object.keys(savedMapping).length>0){\n      let mapping = {...this.state.mapping}\n      for (let [code, value] of Object.entries(savedMapping)) {\n        mapping[code] = value\n      }\n      this.setState({mapping:mapping})\n    }\n  }\n\n  handleCC = (ch,cc, val)=>{\n    const k = this.state.activeParameter\n    if(this.state.mapping[k] && this.state.learning){\n      let mapping = {...this.state.mapping}\n      if(mapping[k] !== cc){\n        mapping[k] = cc\n        this.setState({mapping: mapping})\n        reactLocalStorage.setObject('mapping',mapping)\n      }\n    }\n\n    for (let [k, m] of Object.entries(this.state.mapping)) {\n      if(m === cc){\n        const bits = bitness(k)\n        const resolution = Math.pow(2,bits)\n        const step = 128/resolution\n        const v = Math.floor(val/step)\n        this.updateParam(k,v)\n      }\n    }\n\n  }\n\n  toggleLearning = () =>{\n    this.setState({learning: !this.state.learning})\n  }\n\n  sendParameter = (code, value) => {\n    if(globalParams.includes(code)){\n      //const pId = globalParams.indexOf(code)\n      // 0x05 is a globalParam\n      //this.state.midi.sendSysexSet([0x05,pId,value])\n      //updates current patch\n      console.log(code)\n      this.patch[code] = value\n\n      if(code === 'lfo' ){\n        this.state.midi.sendCC(0,1,(value+1)*16-1)\n      }else if(code === 'play-mode' ){\n        this.state.midi.sendCC(0,2,value)\n      }else if(code === 'vel-sensitivity' ){\n        this.state.midi.sendCC(0,3,value)\n      }\n\n\n    }else{\n      const parts = code.split('_')\n      const param = parts[0]\n      const op = parseInt(parts[1])\n      const pId = ctrlMap.indexOf(param)\n      if(pId===-1){\n        console.error(`Unexpected param ${param} in code ${code}`)\n      }else{\n         //todo: implement omni channel on chip side\n         // and avoid resending parameters triggered by omni channel\n        // this.state.midi.sendSysexSet([this.state.voice,op,pId,value])\n\n        const ccMap = ['ar','d1','sl','d2','rr','tl','mul','det','rs','am']\n        const ccOff = ccMap.indexOf(param)\n        if(ccOff!==-1){\n          const bits = bitness(param)\n          const resolution = Math.pow(2,bits)\n          const step = 128/resolution\n          const v = (value+1)*step-1\n          for(let i=0;i<6;i++)\n            this.state.midi.sendCC(i,20+op*10+ccOff,v)\n        }\n\n        const ccMap2 = ['al','fb','ams','fms','st','lfo']\n        const ccOff2 = ccMap2.indexOf(param)\n        if(ccOff2!==-1){\n          const bits = bitness(param)\n          const resolution = Math.pow(2,bits)\n          const step = 128/resolution\n          const v = (value+1)*step-1\n          for(let i=0;i<6;i++)\n            this.state.midi.sendCC(i,10+ccOff2,v)\n        }\n\n\n        this.state.emulator.update(this.state.voice,code,value)\n        //updates current patch\n        this.patch.voices[this.state.voice][code] = value\n      }\n    }\n\n  }\n\n  sendVoice = (v) => {\n    //filter out omni channel\n    const keys = Object.keys(this.state.params)\n      .filter( k => k.startsWith(`${v}_`))\n      .sort()\n    //[[am,ar,d1,d2,det,mul,rr,rs,sl,tl]*4 ,al,ams,fb,fms,st]\n    //[10*4+5] = 45\n    const data = keys.map( k => this.state.params[k])\n    data.unshift(v)\n    data.unshift(0x04)\n    this.state.midi.sendSysexSet(data)\n  }\n\n\n\n  sendPatch = () => {\n\n    for (let v=0;v<6;v++) {\n      for (let [code, value] of Object.entries(this.patch.voices[v])) {\n        this.state.emulator.update(v,code,value)\n      }\n    }\n    //lfo\n    this.state.emulator.update(null,'lfo',this.patch['lfo'])\n    //this.sendVoice(0)\n  }\n\n  setActiveParameter = (param) => {\n    this.setState({activeParameter: param})\n  }\n\n  updateParam = (code, value) => {\n    let params = {...this.state.params}\n    params[code] = value\n    this.setState({params: params})\n  }\n\n  loadPatch = (patch) => {\n    this.patch = patch\n    this.updateParamsFromVoice(patch.voices[this.state.voice])\n    this.loadingPatch =  true\n  }\n\n  selectVoice= (v) => {\n    this.updateParamsFromVoice(this.patch.voices[v])\n    this.setState({voice: v})\n    this.loadingVoice =  true\n  }\n\n  updateParamsFromVoice = (voice) => {\n    let params = {...this.state.params}\n    //todo: update LFO\n    for (let [code, value] of Object.entries(voice)) {\n      params[code] = value\n    }\n    this.setState({params: params})\n  }\n\n  //todo: refactor this shitty code\n  componentDidUpdate(prevProps, prevState) {\n\n    if(this.loadingPatch){\n      this.loadingPatch = false\n      //send all params when loading a patch\n      this.sendPatch()\n      this.updateEnvelopesIfChanged(this.state.params)\n    }else if(this.loadingVoice){\n      this.loadingVoice = false\n      this.updateEnvelopesIfChanged(this.state.params)\n    }else{\n\n      //we only care if params have changed\n      if(prevState.params===this.state.params)\n        return\n\n      //send only differences\n      const diff = obj_diff(prevState.params, this.state.params)\n      const entries = Object.entries(diff)\n      if(entries.length>0){\n        for (let [code, value] of entries) {\n          this.sendParameter(code,value)\n        }\n        this.updateEnvelopesIfChanged(diff)\n      }\n    }\n  }\n\n  updateEnvelopesIfChanged(diff){\n    //check if any envelope should change\n    const env_params = ['ar','d1','sl','d2','rr','tl']\n    const envs = Object.keys(diff).reduce((acc, key) => {\n      if (env_params.some((a) => key.startsWith(a)))\n        //accumulates channel_operator to identify envelope to update\n        acc.push(key.split('').reverse()[0])\n      return acc\n    }, [])\n      .filter((x, i, a) => a.indexOf(x) === i) //filter unique\n\n    //update envelopes?\n    if(envs.length){\n      let envelopes = {...this.state.envelopes}\n      envs.forEach( (e) => {\n        const env = env_params\n          .reduce((acc,i)=>{acc[`${i}`]=this.state.params[`${i}_${e}`];return acc},{})\n        // re-calculate changed envelope\n        envelopes[e] = calculateEnvelopePoints(env)\n      })\n      this.setState({envelopes: envelopes})\n    }\n  }\n\n  render () {\n    return (\n      // value prop is where we define what values\n      // that are accessible to consumer components\n       <CV2612Context.Provider value={this.state}>\n        {this.props.children}\n      </CV2612Context.Provider>\n    )\n  }\n}\n","export default function obj_diff(a,b){\n  return Object.keys(b).reduce((diff, key) => {\n    if (a[key] === b[key]) return diff\n    return {\n      ...diff,\n      [key]: b[key]\n    }\n  }, {})\n}\n","//rename to defaultParams\nexport const calculateEnvelopePoints = (env) =>{\n  const x1 = Math.round((31-env.ar)/31*100)\n  const y1 = Math.round(env.tl/127*100)\n  const x2 = Math.round(x1+(31-env.d1)/31*100)\n  const y2 = Math.round(y1+(100-y1)*(env.sl/15))\n  const x3 = Math.round(x2+100)\n  const y3 = Math.round(y2+(100-y2)*(0.5*(env.d2/31)))\n  const x4 = Math.round(x3+(15-env.rr)/31*200)\n\n  const points = [\n      [0,100],\n      [x1,y1],\n      [x2,y2],\n      [x3,y3],\n      [x4,100]\n    ]\n  return points.map((p)=>p.join(',')).join(' ').replace(/NaN/g,'0')\n}\n","//import {encodeSysEx, decodeSysEx} from \"./utils/sysex\"\n\n\nclass MidiIO {\n  caller = null\n  ma= null\n  //use to prevent loopback\n  lastMsg = null\n\n  constructor(callerObject){\n    this.caller = callerObject\n    navigator.requestMIDIAccess( { sysex: true }).then(\n      (ma)=>{\n        this.ma = ma\n        ma.onstatechange = this.refresh\n        this.refresh()\n      },()=>console.log('Could not access your MIDI devices.'))\n\n  }\n\n  refresh = (e) => {\n    const inputs = Array.from(this.ma.inputs.values())\n    const outputs = Array.from(this.ma.outputs.values())\n    for(let i of inputs)\n      i.onmidimessage = this.onMIDIMessage\n\n    this.caller.onStateChange(inputs,outputs)\n  }\n\n\n  sendHandshake2 = async () => {\n    const deviceIdRequest = [0xF0, 0x7E, 0x7F, 0x06, 0x01, 0xF7]\n    return this.sendSysex(deviceIdRequest).then(data =>{\n        return data\n    })\n\n  }\n\n\n  sendHandshake = async () => {\n    const idReply = [0xF0, 0x7E, 0x00, 0x06, 0x02,  //identity reply\n        0x26, 0x26, 0x12, 0x00, 0x00, // ID - family code - model number\n        0x01, 0x00, 0x00, 0x00, 0xF7] //version - end\n\n    const deviceIdRequest = [0xF0, 0x7E, 0x7F, 0x06, 0x01, 0xF7]\n    return this.sendSysex(deviceIdRequest).then(data =>{\n      if(JSON.stringify(data) === JSON.stringify(idReply)){\n        return (`CV2612 found!`)\n      }else{\n        throw new Error('Not a CV2612 found!')\n      }\n    })\n\n  }\n\n\n  // only one sysex at a time\n  sysexPromisePending = false\n  sysexPromiseResolve = null\n  // sysex is a promise because we always expect an aknowledge\n  sendSysex = async (data) => {\n\n    if(this.sysexPromisePending)\n      throw new Error('A sysex message is pending')\n\n    const ms = 500\n    // Create a promise that rejects in <ms> milliseconds\n    let timeout = new Promise((resolve, reject) => {\n      let id = setTimeout(() => {\n        clearTimeout(id);\n        this.sysexPromisePending = false\n        reject('Timed out in '+ ms + 'ms.')\n      }, ms)\n    })\n\n    const sysexPromise = new Promise((resolve, reject) => {\n      this.sendMidi(data)\n      this.sysexPromisePending = true\n      this.sysexPromiseResolve = resolve\n    });\n\n    return Promise.race([sysexPromise,timeout])\n\n  }\n\n\n  sendSysexSet = async (data) => {\n    // send data header\n    const msg = [0xF0, 0x41, 0x26, 0x12, 0x12]\n    let sum = 0\n    for(let d of data){\n      msg.push(d)\n      sum += d\n    }\n    // checksum\n    msg.push(0x7F - (sum%0x7F))\n    // end byte\n    msg.push(0xF7)\n    return this.sendSysex(msg)\n  }\n\n  //todo: turn into a promise\n  sendMidi = (data) => {\n    if(this.ma===null){\n      return\n    }\n    const midiOut = this.ma.outputs.get(this.caller.state.midiOutId)\n    if(midiOut){\n      midiOut.send(data)\n    }else{\n      console.log('no midi out')\n    }\n\n  }\n\n  onCtrlMIDIMessage = (msg) => {\n\n    if(msg.target.id !== this.caller.state.midiCtrlInId)\n      return\n\n    const data = Array.from(msg.data)\n\n\n    //warning: filter loopback messages somehow\n    if(JSON.stringify(this.lastMsg) === JSON.stringify(data)){\n      this.caller.onLoopBack()\n      return\n    }\n\n\n    const type = data[0] & 0xf0\n\n    if(type === 0xB0){\n      const ch = data[0] & 0x0f\n      const cc = data[1] & 0x7f\n      const val = data[2] & 0x7f\n      this.caller.onControlChange(ch,cc, val)\n    }\n\n    // resend noteon/off events\n    if(type === 0x80 || type === 0x90){\n      this.sendMidi(data)\n\n      if(type === 0x90){\n        this.caller.onNoteOn(data[1], data[2])\n      }else{\n        this.caller.onNoteOff(data[1], data[2])\n      }\n    }\n\n  }\n\n\n  //only sysex messages are expected here\n  onMIDIMessage = (msg) => {\n\n    if(msg.target.id !== this.caller.state.midiInId)\n      return\n\n    const data = Array.from(msg.data)\n\n    //warning: filter loopback messages somehow\n    if(JSON.stringify(this.lastMsg) === JSON.stringify(data)){\n      this.caller.onLoopBack()\n      return\n    }\n\n    // sysex status byte. resolve the promise\n    if(data[0]===0xF0){\n      this.sysexPromisePending = false\n      this.sysexPromiseResolve(data)\n    }\n\n  }\n\n}\n\nexport default MidiIO\n","import React from 'react'\nimport {CV2612Context} from \"./context\"\nimport {reactLocalStorage} from 'reactjs-localstorage'\nimport { FaSlidersH,\n         FaTrash,\n         FaGhost\n        } from 'react-icons/fa'\nimport MidiIO from './midi-io'\n\n\n//warning: this component cannot be unmounted\nclass Midi extends React.Component {\n  static contextType = CV2612Context\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      midiIns: [],\n      midiOuts: [],\n      connected: false\n    }\n  }\n\n  componentDidMount(){\n    this.io = new MidiIO(this)\n    this.context.midi = this\n  }\n\n  onStateChange(inputs,outputs){\n    const s = {midiIns:inputs, midiOuts:outputs, connected: false}\n\n    const refresh = (key,array) =>{\n      let id = reactLocalStorage.get(key,'')\n      // is last id still available??\n      if( id!=='' && !array.map(a=>a.id).includes(id) ){\n        id = inputs[0].id\n      }\n      if(id !== this.state[key])\n        s[key] = id\n    }\n\n    if(inputs.length){\n      refresh('midiInId',inputs)\n      refresh('midiCtrlInId',inputs)\n    }\n    if(outputs.length){\n      refresh('midiOutId',outputs)\n    }\n\n\n    this.setState(s)\n\n  }\n\n  onLoopBack(){\n    this.setMidiOut('')\n    console.error('Loopback prevented')\n  }\n\n\n  onNoteOn(pitch, velocity){\n    this.context.emulator.noteOn(pitch)\n  }\n\n  onNoteOff(pitch, velocity){\n    this.context.emulator.noteOff(pitch)\n  }\n\n  onControlChange(ch,cc, val){\n    this.context.handleCC(ch,cc, val)\n  }\n\n\n\n  onChangeMidiIn = (ev) => {\n    this.setState({midiInId: ev.target.value})\n  }\n\n  onChangeMidiCtrlIn = (ev) => {\n    this.setState({midiCtrlInId: ev.target.value})\n  }\n\n  onChangeMidiOut = (ev) => {\n    this.setState({midiOutId: ev.target.value})\n  }\n\n\n  //todo: refactor this shitty code\n  componentDidUpdate(prevProps, prevState) {\n    let handshake = false;\n\n    (['midiCtrlInId','midiInId','midiOutId']).forEach((m)=>{\n      if(prevState[m] !== this.state[m]){\n        reactLocalStorage.set(m,this.state[m])\n        //disconnect inmediatelly\n        this.setState({connected:false})\n        handshake = true\n      }\n    })\n\n    if(handshake){\n\n      (async () => {\n        try {\n          await this.io.sendHandshake()\n          this.setState({connected:true})\n        } catch(err) {\n          console.error(err)\n          this.setState({connected:false})\n        }\n      })();\n\n\n      /*\n\n      (async () => {\n\n        try {\n          let data = await this.io.sendHandshake2()\n          console.log(data)\n          data = await this.io.sendHandshake2()\n          console.log(data)\n          data = await this.io.sendHandshake2()\n          console.log(data)\n          data = await this.io.sendHandshake2()\n          console.log(data)\n          data = await this.io.sendHandshake2()\n          console.log(data)\n        } catch(err) {\n          console.error(err)\n        }\n\n      })();\n\n\n        */\n\n\n\n    }\n  }\n\n  sendMidi = (data) => {\n    this.io.sendMidi(data)\n  }\n\n  sendCC = (ch,n,v) => {\n    const data = [0xb0|ch,0x7f&n,0x7f&v]\n    console.log(data)\n    this.io.sendMidi(data)\n  }\n\n\n  onLearnClick = (e) => {\n    e.preventDefault()\n    this.context.toggleLearning()\n  }\n\n  onPanicClick = (e) => {\n    e.preventDefault()\n    this.sendMidi([0xFF])\n  }\n\n  onClearClick = (e) => {\n    e.preventDefault()\n    this.sendSysexSet([0x06,0x04,0x11,0x00])\n  }\n\n  onToggleSoundClick = (e) => {\n    e.preventDefault()\n    this.context.toggleSound()\n  }\n\n  render() {\n    return (\n      <nav className={`midi ${this.state.connected ? 'connected' :''}`}>\n        <span>Ctrl</span>\n        <select className=\"ctrl\" value={this.state.midiCtrlInId} onBlur={this.onChangeMidiCtrlIn}>\n          <option key=\"\" value=\"\">Not Connected</option>\n          {this.state.midiIns.map((i) =><option key={i.id} value={i.id}>{i.name}</option>)}\n        </select>\n        <span>In</span>\n        <select className=\"in\" value={this.state.midiInId} onBlur={this.onChangeMidiIn}>\n          <option key=\"\" value=\"\">Not Connected</option>\n          {this.state.midiIns.map((i) =><option key={i.id} value={i.id}>{i.name}</option>)}\n        </select>\n        <span>Out</span>\n        <select className=\"out\" value={this.state.midiOutId} onBlur={this.onChangeMidiOut}>\n          <option key=\"\" value=\"\">Not Connected</option>\n          {this.state.midiOuts.map((o) =><option key={o.id} value={o.id}>{o.name}</option>)}\n        </select>\n        <a className={this.context.learning ? 'learning':''} href=\"/\" title=\"Click to Learn\" onClick={this.onLearnClick}><FaSlidersH/></a>\n        <a href=\"/\" title=\"Click if panic\" onClick={this.onPanicClick}><FaGhost/></a>\n        <a href=\"/\" title=\"Click to clear midi mapping\" onClick={this.onClearClick}><FaTrash/></a>\n      </nav>\n    )\n  }\n}\n\nexport default Midi;\n","import React from 'react'\nimport {CV2612Context} from \"./context\"\nimport {emptyVoice} from \"./utils/patches-utils\"\nimport AudioKeys from 'audiokeys'\nimport { FaVolumeOff as FaVolume,\n         FaVolumeMute as FaVolumeSlash\n        } from 'react-icons/fa'\n\n//todo: update for all 6 channels\n//todo: unload properly\n\nconst kb = new AudioKeys({polyphony: 1,rows: 1,priority: 'last',octave: 2})\n\n\nclass Emulator extends React.Component {\n  static contextType = CV2612Context\n  audioCtx = null\n\n  constructor(props) {\n    super(props)\n    this.state = {soundOn: false}\n    this.fftSize = 1024\n    this.cache = []\n    for (let i = 0; i < 6; i++)\n      this.cache.push(emptyVoice())\n\n  }\n\n  componentDidMount(){\n    //todo: initialize audio context properly\n    this.audioCtx = new AudioContext()\n    if(this.audioCtx.state==='running')\n       this.initialize()\n\n    this.notes = []\n    this.context.emulator = this\n    kb.down(this.onKeyDown)\n    kb.up(this.onKeyUp)\n\n    this.scope = this.refs.scope.getContext(\"2d\")\n    this.scope.fillStyle = 'rgba(0, 20, 0, 0.1)'\n    this.scope.lineWidth = 2;\n    this.scope.strokeStyle = '#509eec'\n    this.spectrum = this.refs.spectrum.getContext(\"2d\")\n    this.spectrum.fillStyle = 'rgba(0, 20, 0, 0.1)'\n    this.spectrum.lineWidth = 1;\n    this.spectrum.strokeStyle = '#509eec'\n\n    this.stopAnimation = false\n    this.timeData = new Uint8Array(this.fftSize).fill(128)\n    this.freqData = new Uint8Array(this.fftSize)\n\n    requestAnimationFrame(this.tick)\n\n  }\n\n  componentWillUnmount(){\n    this.audioCtx.suspend()\n    kb._listeners.down = []\n    kb._listeners.up = []\n    this.stopAnimation = true\n    this.timeData = null\n    this.freqData = null\n\n  }\n\n  tick = () => {\n    if (this.stopAnimation)\n       return\n\n    this.drawScope()\n    this.drawSpectrum()\n    requestAnimationFrame(this.tick)\n  }\n\n  drawScope(){\n\n    const ctx = this.scope\n    const width = ctx.canvas.width\n    const height = ctx.canvas.height\n    const l = this.fftSize\n    const scaling = height / 256\n\n    if(this.analyser)\n      this.analyser.getByteTimeDomainData(this.timeData)\n\n\n    ctx.fillRect(0, 0, width, height)\n    ctx.beginPath()\n\n    const e = this.timeData.reduce( (acc, it, i, a) => {\n      return ((acc===0) && (i>0) && (i<l-10) && a[i-1]<128 && a[i+10]>128) ? i : acc\n    } , 0)\n\n    for (let x = e; x < l && x - e < width; x++)\n      ctx.lineTo(x - e, height - this.timeData[x] * scaling)\n\n    ctx.stroke()\n  }\n\n  drawSpectrum() {\n    const ctx = this.spectrum\n    const width = ctx.canvas.width\n    const height = ctx.canvas.height\n    const l = this.fftSize\n    const scaling = height / 256\n    const scalingX = width / l\n\n    if(this.analyser)\n      this.analyser.getByteFrequencyData(this.freqData)\n\n    ctx.fillRect(0, 0, width, height)\n    ctx.beginPath()\n\n    const toLog = (value, min, max) =>{\n      const exp = (value-min) / (max-min)\n      return min * Math.pow(max/min, exp)\n    }\n\n\n    for (let i = 1; i < l; i++) {\n      var logindex = toLog(i,1,l-1)\n      //As the logindex will probably be decimal, we need to interpolate (in this case linear interpolation)\n      const low = Math.floor(logindex)\n      const high = Math.ceil(logindex)\n      const lv = this.freqData[low]\n      const hv = this.freqData[high]\n      const w = (logindex-low)/(high-low)\n      const v = lv + (hv-lv)*w\n\n      ctx.lineTo(i*scalingX, height - v * scaling)\n\n    }\n\n    ctx.stroke()\n  }\n\n\n  initialize(){\n\n    this.audioCtx.audioWorklet.addModule('/cv2612/ym2612-processor.js').then(() => {\n      this.ym2612Node = new AudioWorkletNode(this.audioCtx, 'ym2612-generator', { outputChannelCount: [2] })\n      //this.ym2612Node.port.onmessage = (event) => {console.log(event.data)}\n      this.ym2612Node.connect(this.audioCtx.destination)\n\n      this.analyser = this.audioCtx.createAnalyser()\n      this.analyser.fftSize = this.fftSize\n      this.ym2612Node.connect(this.analyser)\n\n      this.write(0x27,0x00) //chan3 normal mode\n      this.write(0x28,0x00)\n      // load all patch params\n      //this.loadCurrentPatch()\n    })\n\n     this.setState({soundOn: true})\n\n  }\n\n\n\n  noteOn = (note) => {\n    const f = ( Math.pow(2, ( note-69 ) / 12) ) * 440.0\n    this.onKeyDown({note:note,frequency:f})\n  }\n\n  noteOff = (note) => {\n    this.onKeyUp({note:note})\n  }\n\n  onKeyDown = (note) => {\n    if(note.note<0 || note.note>127 )\n      return\n\n    this.context.midi.sendMidi([0x90,note.note,0x70])\n\n    if(!this.ym2612Node)\n      return\n\n\n    if(this.notes.indexOf(note.note)===-1)\n      this.notes.push(note.note)\n\n    this.setFrequency(note.frequency)\n\n    if(this.notes.length===1){\n      this.keyOn()\n    }\n  }\n\n  onKeyUp = (note) => {\n    if(note.note<0 || note.note>127 )\n      return\n\n    this.context.midi.sendMidi([0x80,note.note,0x00])\n\n    if(!this.ym2612Node)\n      return\n\n\n    for( let i = 0; i < this.notes.length; i++){\n       if ( this.notes[i] === note.note)\n         this.notes.splice(i, 1)\n    }\n\n    if(this.notes.length===0){\n      this.keyOff()\n    }\n  }\n\n  setFrequency(f) {\n    let block = 4\n    while (f >= 2048) {\n      f /= 2\n      block++\n    }\n    const freq = parseInt(f)\n\n    for(let chan=0;chan<6;chan++){\n      const ch_off = (Math.floor(chan/3) * 0x100 + chan%3 )\n      this.write(0xA4+ch_off, ((freq >> 8) & 0x07) | ( ( block & 0x07 ) << 3))\n      this.write(0xA0+ch_off, freq&0xFF)\n    }\n  }\n\n\n  keyOn() {\n    for(let chan=0;chan<6;chan++)\n      this.write(0x28, 0xF0 + (Math.floor(chan/3) * 4 + chan%3 ) )\n  }\n\n  keyOff() {\n    for(let chan=0;chan<6;chan++)\n      this.write(0x28, 0x00 + (Math.floor(chan/3) * 4 + chan%3 ) )\n  }\n\n\n  write(address,value){\n    if(!this.ym2612Node)\n      return\n\n    //console.log(address.toString(16),value.toString(16))\n    this.ym2612Node.port.postMessage([address,value])\n  }\n\n\n  update = (voice,code,value) =>{\n\n    const parts = code.split('_')\n    const param = parts[0]\n    const op = parts[1]\n\n    if(code==='lfo'){\n      const v = (((value>0) & 0x01)<<3) | (value & 0x07)\n      this.write(0x22, v)\n      return\n    }\n\n    //cache values since we have to write the whole register every time\n    this.cache[voice][code] = value\n\n    const ch_off = Math.floor(voice/3) * 0x100 + voice%3\n    const mask = (key,size,shift) =>{\n      const v = (op===undefined)? this.cache[voice][key] : this.cache[voice][`${key}_${op}`]\n      return (v & (Math.pow(2,size)-1))<<shift\n    }\n\n    if(param==='det' || param==='mul' ){\n      const v = mask('det',3,4)|mask('mul',4,0)\n      this.write(0x30+4*op+ch_off, v)\n    }\n    else if(param==='tl'){\n      const v = mask('tl',7,0)\n      this.write(0x40+4*op+ch_off, v)\n    }\n    else if(param==='rs' || param==='ar' ){\n      const v = mask('rs',2,6)|mask('ar',5,0)\n      this.write(0x50+4*op+ch_off, v)\n    }\n    else if(param==='am' || param==='d1' ){\n      const v = mask('am',1,7)|mask('d1',5,0)\n      this.write(0x60+4*op+ch_off, v)\n    }\n    else if(param==='d2' ){\n      const v = mask('d2',5,0)\n      this.write(0x70+4*op+ch_off, v)\n    }\n    else if(param==='sl' || param==='rr' ){\n      const v = mask('sl',4,4)|mask('rr',4,0)\n      this.write(0x80+4*op+ch_off, v)\n    }\n    else if(param==='al' || param==='fb' ){\n      const v = mask('fb',3,3)|mask('al',3,0)\n      this.write(0xB0+ch_off, v)\n    }\n    else if(param==='st' || param==='ams'|| param==='fms' ){\n      const v = mask('st',2,6)|mask('ams',2,4)|mask('fms',3,0)\n      this.write(0xB4+ch_off, v)\n    }\n  }\n\n  onToggleSoundClick = (e) => {\n    e.preventDefault()\n\n    if(this.audioCtx.state === 'running') {\n      this.audioCtx.suspend().then(() => {\n        this.setState({soundOn: false})\n      });\n    } else if(this.audioCtx.state === 'suspended') {\n      this.audioCtx.resume().then(()=> {\n        this.initialize()\n      });\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"emulator\">\n        <nav>\n          <a href=\"/\" title=\"Toggles Sound\" onClick={this.onToggleSoundClick}>{this.state.soundOn ?<FaVolume/>:<FaVolumeSlash/>}</a>\n        </nav>\n        <canvas ref=\"scope\" width={200} height={60} />\n        <canvas ref=\"spectrum\" width={200} height={60} />\n      </div>\n    )\n  }\n\n}\n\nexport default Emulator;\n","import React from 'react'\nimport {CV2612Context} from \"./context\"\nimport {dmp2voice,  emptyPatch} from \"./utils/patches-utils\"\n\nimport {reactLocalStorage} from 'reactjs-localstorage'\nimport { FaPlus,\n         FaBackspace,\n         FaCaretLeft,\n         FaCaretRight,\n         FaBomb,\n         FaSave,\n         FaUpload\n        } from 'react-icons/fa'\n\n\nclass Patches extends React.Component {\n  static contextType = CV2612Context\n\n  constructor(props){\n    super(props)\n    this.state = {\n      patches: [emptyPatch()],\n      current: 0,\n    }\n  }\n\n  componentDidMount(){\n    const patches = [] // reactLocalStorage.getObject('patches',[])\n    if(patches.length===0 || Object.keys(patches).length===0){\n      this.loadDefaultPatches()\n    }else{\n      this.setState({patches:patches})\n    }\n  }\n\n  save(patches){\n    reactLocalStorage.setObject('patches',patches)\n    this.setState({patches:patches})\n  }\n\n  loadDefaultPatches(){\n    //empty previous patches\n    this.save([])\n\n    const r = new XMLHttpRequest()\n    r.onreadystatechange = (ev) => {\n      if(r.readyState === 4 && r.status === 200) {\n        const insts = r.responseText.split(/\\r?\\n/).filter( x => x.length>1)\n        for(const i of insts){\n          const r = new XMLHttpRequest()\n          r.responseType = 'arraybuffer'\n          r.onreadystatechange = (ev) => {\n            if(r.readyState === 4 && r.status === 200) {\n              const d = new Int8Array(r.response)\n              this.addDmpPatch(i,d)\n            }\n          }\n          r.open('GET',encodeURI(`/cv2612/instruments/${i}`))\n          r.send(null)\n        }\n      }\n    }\n    r.open('GET', '/cv2612/instruments/index.txt')\n    r.send(null)\n  }\n\n  //todo: load to all voices or current voice\n  componentDidUpdate(prevProps, prevState) {\n    //fixme: if i delete a patch, current doesnt change...\n    if(prevState.current !== this.state.current){\n      const i = parseInt(this.state.current)\n      const patch = this.state.patches[i]\n      if(patch)\n        this.context.loadPatch(patch)\n    }\n\n    if(prevState.patches.length !== this.state.patches.length){\n      this.setState({current:0})\n      const patch = this.state.patches[0]\n      if(patch)\n        this.context.loadPatch(patch)\n    }\n  }\n\n\n\n  addDmpPatch = (name, data) => {\n    const voice = dmp2voice(name,data)\n    if(voice !== null){\n      this.addPatch(name.replace('.dmp',''), [voice])\n    }\n\n    // Generate random patches with different voices\n    if(this.state.patches.length > 10){\n      //add random patch\n      const name = `Random ${Math.floor(Math.random()*1000)}`\n      const voices = []\n      for(let i=0;i<6;i++){\n        const n = Math.floor(Math.random()*this.state.patches.length)\n        const voice = this.state.patches[n].voices[0]\n        voices.push( Object.assign( {}, voice))\n      }\n\n      this.addPatch(name, voices)\n\n    }\n\n  }\n\n  addPatch = (name, voices) => {\n    const patch = emptyPatch()\n    patch.name = name\n    for(let i=0;i<6;i++){\n      const voice = voices[i % voices.length]\n      //clone the voice for all channels\n      patch[`voices`][i] = Object.assign( {}, voice)\n    }\n    const patches = this.state.patches\n    patches.push(patch)\n    this.save(patches)\n  }\n\n  onChangeHandler = (ev) => {\n    //todo: refactor to work with new changes\n    for(const f of ev.target.files){\n      const fr = new FileReader()\n      fr.onload = () =>{\n        const d = new Int8Array(fr.result)\n        this.addDmpPatch(f.name,d)\n      }\n      fr.readAsArrayBuffer(f)\n    }\n  }\n\n  onChange = (ev) => {\n    this.setState({current: ev.target.value})\n    ev.target.blur()\n  }\n\n  onSave = (e) => {\n    //todo: refactor to work with new changes\n    e.preventDefault()\n    if(this.state.patches.length===0)\n      return\n\n    const patches = this.state.patches\n    const i = parseInt(this.state.current)\n    patches[i].params = this.context.params\n    this.save(patches)\n\n  }\n\n  onCreate = (e) => {\n    //todo: refactor to work with new changes\n    e.preventDefault()\n    let patch = prompt(\"Name your patch\")\n    if (patch !== null && patch !== \"\") {\n      const patches = this.state.patches\n      patches.push({name:patch, params: this.context.params})\n      this.save(patches)\n    }\n  }\n\n  onDelete = (e) => {\n    e.preventDefault()\n    if(this.state.patches.length<=1)\n      return\n\n    const patches = this.state.patches.filter( (p,i) => i!==parseInt(this.state.current))\n    this.save(patches)\n  }\n\n  onLoadDefaults = (e) => {\n    e.preventDefault()\n    this.loadDefaultPatches()\n  }\n\n  onLeftClick = (e) => {\n    e.preventDefault()\n    const i = parseInt(this.state.current)\n    if(i>0){\n      this.setState({current:i-1})\n    }\n  }\n\n  onRightClick = (e) => {\n    e.preventDefault()\n    const i = parseInt(this.state.current)\n    if(i<this.state.patches.length-1){\n      this.setState({current:i+1})\n    }\n  }\n\n  onUploadClick = (e) => {\n    e.preventDefault()\n    this.refs.file.click()\n  }\n\n  render() {\n    return (\n      <nav>\n        <a href=\"/\" title=\"Previous Patch\" onClick={this.onLeftClick}><FaCaretLeft/></a>\n        <select value={this.state.current} onBlur={this.onChange}>\n          {this.state.patches.map((p,i) =><option key={i} value={i}>{p.name}</option>)}\n        </select>\n        <a href=\"/\" title=\"Next Patch\" onClick={this.onRightClick}><FaCaretRight/></a>\n        <a href=\"/\" title=\"Save this Patch\" onClick={this.onSave}><FaSave/></a>\n        <a href=\"/\" title=\"Create new Patch\" onClick={this.onCreate}><FaPlus/></a>\n        <a href=\"/\" title=\"Upload Patches\" onClick={this.onUploadClick}><FaUpload/></a>\n        <a href=\"/\" title=\"Delete this Patch\" onClick={this.onDelete}><FaBackspace/></a>\n        <a href=\"/\" title=\"Load default Patches\" onClick={this.onLoadDefaults}><FaBomb/></a>\n        <input style={{display:'none'}} ref=\"file\" type=\"file\" accept=\".dmp\" multiple onChange={this.onChangeHandler} / >\n\n      </nav>\n    )\n  }\n}\n\n\nexport default Patches;\n","import React, {useContext} from \"react\"\nimport {CV2612Context} from \"./context\"\n\nconst Envelope = (props) =>{\n  const context = useContext(CV2612Context)\n  return (\n    <div className=\"envelope\">\n      <svg height=\"100\" width=\"400\" viewBox=\"0 0 400 100\" xmlns=\"http://www.w3.org/2000/svg\">\n        <polyline points={context.envelopes[`${props.op}`]} />\n      </svg>\n    </div>\n  )\n}\n\nexport default Envelope\n","import React, {useContext} from \"react\"\nimport {CV2612Context} from \"./context\"\nimport {bitness} from \"./utils/patches-utils\"\n\nconst Slider = (props) =>{\n  const context = useContext(CV2612Context)\n  const bits = bitness(props.name)\n  const max = Math.pow(2,bits)-1\n  const code = (props.op === undefined) ? props.name : `${props.name}_${props.op}`\n  const className = 'slider'\n    .concat(context.learning ? ' learn' : '')\n    .concat(context.activeParameter === code ? ' active' : '')\n    .concat(context.mapping[code]!==null ? ' mapped' : '')\n\n\n  const onChange = (ev) =>{\n    ev.preventDefault()\n    context.updateParam(code,parseInt(ev.target.value))\n    context.setActiveParameter(code)\n  }\n\n  const onClick = (ev) =>{\n    ev.preventDefault()\n    context.setActiveParameter(code)\n  }\n\n  return (\n    <div className={className} onClick={onClick} aria-hidden=\"true\" >\n      <label>{props.name}</label>\n      <input type=\"range\" step={1} min={0} max={max} value={context.params[code]} onChange={onChange} />\n      <span>\n        {context.params[code] + (context.learning ? ` - CC ${context.mapping[code]}`: '') }\n      </span>\n    </div>\n  )\n}\n\n\nexport default Slider\n","import React from \"react\"\nimport Envelope from \"./envelope\"\nimport Slider from \"./slider\"\n\nconst Operator = (props) =>{\n  return (\n    <div className=\"operator\">\n      <Slider name=\"ar\" op={props.op} />\n      <Slider name=\"d1\" op={props.op} />\n      <Slider name=\"sl\" op={props.op} />\n      <Slider name=\"d2\" op={props.op} />\n      <Slider name=\"rr\" op={props.op} />\n      <Slider name=\"tl\" op={props.op} />\n      <Envelope op={props.op} />\n      <Slider name=\"mul\" op={props.op} />\n      <Slider name=\"det\" op={props.op} />\n      <Slider name=\"rs\" op={props.op} />\n      <Slider name=\"am\" op={props.op} />\n    </div>\n  )\n}\n\nexport default Operator\n","import React, {useContext} from \"react\"\nimport {CV2612Context} from \"./context\"\nimport Operator from \"./operator\"\nimport Slider from \"./slider\"\nimport algorithmAscii from \"./utils/algorithmAscii\"\n\nconst Channel = (props) =>{\n  const context = useContext(CV2612Context)\n  return (\n    <div className=\"channel\">\n      <div className=\"four-cols\">\n        <div className=\"col\">\n          <Slider name=\"fb\" />\n          <Slider name=\"ams\" />\n        </div>\n        <div className=\"col\">\n          <Slider name=\"st\" />\n          <Slider name=\"fms\" />\n        </div>\n        <div className=\"col\">\n          <Slider name=\"al\" />\n        </div>\n        <div className=\"col\">\n          <pre className=\"algorithm\">\n            {algorithmAscii(context.params['al'])}\n          </pre>\n        </div>\n      </div>\n      <div className=\"four-cols\">\n        <div className=\"col\"><Operator op={0} /></div>\n        <div className=\"col\"><Operator op={2} /></div>\n        <div className=\"col\"><Operator op={1} /></div>\n        <div className=\"col\"><Operator op={3} /></div>\n      </div>\n    </div>\n  )\n}\n\nexport default Channel\n","export default function algorithmAscii(algorithm) {\n  switch (algorithm) {\n    case 0:\n      return `\n\n\n\n   \n1234\n   \n\n\n\n`\n    case 1:\n      return `\n\n\n1\n     \n    34\n     \n2\n\n\n`\n    case 2:\n      return `\n\n     \n     1\n        \n         4\n     \n23\n  \n\n`\n    case 3:\n      return `\n\n  \n12\n     \n         4\n        \n     3\n     \n\n`\n    case 4:\n      return `\n\n  \n12\n   \n         \n   \n34\n  \n\n`\n    case 5:\n      return `\n      \n    2\n       \n    \n13\n    \n       \n    4\n      \n`\n    case 6:\n      return `\n   \n 12\n     \n        \n      3\n        \n        \n      4\n      \n`\n    case 7:\n      return `\n\n\n   \n1 2 3 4\n   \n \n       \n       \n\n`\n    default:\n      return 'no algorithm'\n  }\n}\n","import React, {useContext} from \"react\"\nimport {CV2612Context} from \"./context\"\n\nconst CvInput = (props) =>{\n  const context = useContext(CV2612Context)\n  const className = 'cv-input'\n    .concat(context.learning ? ' learn' : '')\n    .concat(context.activeParameter === props.code ? ' active' : '')\n    .concat(context.mapping[props.code]!==null ? ' mapped' : '')\n\n  const onClick = (ev) =>{\n    ev.preventDefault()\n    context.setActiveParameter(props.code)\n  }\n\n  return (\n    <div className={className} onClick={onClick} aria-hidden=\"true\">\n      <span>\n        {`${props.code} ${context.params[props.code]}` + (context.learning ? ` - CC: ${context.mapping[props.code]}`: '') }\n      </span>\n    </div>\n  )\n}\n\n\nexport default CvInput\n","import React, {useContext} from \"react\"\nimport {CV2612Context} from \"./context\"\nimport Channel from \"./channel\"\nimport Slider from \"./slider\"\nimport CvInput from \"./cv_input\"\n\n\n\nconst Channels = (props) =>{\n  const context = useContext(CV2612Context)\n\n  const onSelectVoice = (ev) => {\n    ev.preventDefault()\n    const v = parseInt(ev.target.attributes.voice.value)\n    context.selectVoice(v)\n  }\n\n  const sendVoice = (ev) => {\n    ev.preventDefault()\n    context.sendVoice()\n  }\n\n  const sendPatch = (ev) => {\n    ev.preventDefault()\n    //context.sendVoice(v)\n  }\n\n  const sendMapping = (ev) => {\n    ev.preventDefault()\n    //context.sendVoice(v)\n  }\n\n\n\n  return (\n      <>\n        <div className=\"globals\">\n          <h5>Globals</h5>\n          <div className=\"four-cols\">\n            <div className=\"col\">\n              <Slider name=\"lfo\"/>\n              <Slider name=\"play-mode\" />\n              <Slider name=\"vel-sensitivity\" />\n            </div>\n            <div className=\"col\">\n              <Slider name=\"cc-mode\"/>\n              <Slider name=\"rgb-intensity\"/>\n            </div>\n            <div className=\"col\">\n              <CvInput code=\"x\"/>\n              <CvInput code=\"y\"/>\n              <CvInput code=\"z\"/>\n            </div>\n            <div className=\"col\">\n              <ul>\n                <li><a href=\"/\"  onClick={sendVoice} >Send Voice</a></li>\n                <li><a href=\"/\"  onClick={sendPatch} >Send Patch</a></li>\n                <li><a href=\"/\" onClick={sendMapping} >Send Mapping</a></li>\n              </ul>\n            </div>\n          </div>\n        </div>\n        <nav>\n          {[0,1,2,3,4,5].map(i => <a href=\"/\" className={context.voice === i ? 'active':'' } key={i} voice={i} onClick={onSelectVoice} title={`Show voice ${i+1}` }>{`${i+1}` }</a>)}\n        </nav>\n        <Channel />\n      </>\n  )\n\n\n}\n\nexport default Channels\n","\nimport React from \"react\"\nimport {CV2612Provider} from \"./context\"\nimport Midi from \"./midi\"\nimport Emulator from './emulator'\nimport Patches from \"./patches\"\nimport Channels from \"./channels\"\n\nclass Device extends React.Component {\n\n  render() {\n    return (\n        <CV2612Provider>\n          <Emulator />\n          <Midi />\n          <Patches />\n          <Channels />\n        </CV2612Provider>\n    )\n  }\n}\n\nexport default Device\n","import React from \"react\"\nimport Layout from \"../../layouts/cv2612\"\nimport SEO from \"../../components/seo\"\nimport Device from \"../../components/cv2612/device\"\n\n\nclass CV2612Index extends React.Component {\n  render() {\n    return (\n      <Layout location={this.props.location} >\n        <SEO title=\"cv2612\" />\n        <Device />\n      </Layout>\n    )\n  }\n}\n\nexport default CV2612Index\n","module.exports = require(\"regenerator-runtime\");\n","module.exports = {\n  _setState: function _setState(options) {\n    var self = this;\n\n    if (!options) {\n      options = {};\n    } // the state is kept in this object\n\n\n    self._state = {}; // set some defaults ...\n\n    self._extendState({\n      polyphony: 4,\n      rows: 1,\n      priority: 'last',\n      rootNote: 60,\n      octaveControls: true,\n      octave: 0,\n      velocityControls: true,\n      velocity: 127,\n      keys: [],\n      buffer: []\n    }); // ... and override them with options.\n\n\n    self._extendState(options);\n  },\n  _extendState: function _extendState(options) {\n    var self = this;\n\n    for (var o in options) {\n      self._state[o] = options[o];\n    }\n  },\n  set: function set()\n  /* options || property, value */\n  {\n    var self = this;\n\n    if (arguments.length === 1) {\n      self._extendState(arguments[0]);\n    } else {\n      self._state[arguments[0]] = arguments[1];\n    }\n\n    return this;\n  },\n  get: function get(property) {\n    var self = this;\n    return self._state[property];\n  }\n};","require('./_typed-array')('Int8', 1, function (init) {\n  return function Int8Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","// 22.1.3.3 Array.prototype.copyWithin(target, start, end = this.length)\n'use strict';\nvar toObject = require('./_to-object');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\n\nmodule.exports = [].copyWithin || function copyWithin(target /* = 0 */, start /* = 0, end = @length */) {\n  var O = toObject(this);\n  var len = toLength(O.length);\n  var to = toAbsoluteIndex(target, len);\n  var from = toAbsoluteIndex(start, len);\n  var end = arguments.length > 2 ? arguments[2] : undefined;\n  var count = Math.min((end === undefined ? len : toAbsoluteIndex(end, len)) - from, len - to);\n  var inc = 1;\n  if (from < to && to < from + count) {\n    inc = -1;\n    from += count - 1;\n    to += count - 1;\n  }\n  while (count-- > 0) {\n    if (from in O) O[to] = O[from];\n    else delete O[to];\n    to += inc;\n    from += inc;\n  } return O;\n};\n","// Each file contains methods of the prototype.\n// We'll compose them all together here.\nvar state = require('./AudioKeys.state');\n\nvar events = require('./AudioKeys.events');\n\nvar mapping = require('./AudioKeys.mapping');\n\nvar buffer = require('./AudioKeys.buffer');\n\nvar priority = require('./AudioKeys.priority');\n\nvar special = require('./AudioKeys.special');\n\nfunction AudioKeys(options) {\n  var self = this;\n\n  self._setState(options); // all listeners are stored in arrays in their respective properties.\n  // e.g. self._listeners.down = [fn1, fn2, ... ]\n\n\n  self._listeners = {}; // bind DOM events\n\n  self._bind();\n} // state\n\n\nAudioKeys.prototype._setState = state._setState;\nAudioKeys.prototype._extendState = state._extendState;\nAudioKeys.prototype.set = state.set;\nAudioKeys.prototype.get = state.get; // events\n\nAudioKeys.prototype.down = events.down;\nAudioKeys.prototype.up = events.up;\nAudioKeys.prototype._trigger = events._trigger;\nAudioKeys.prototype._bind = events._bind; // mapping\n\nAudioKeys.prototype._map = mapping._map;\nAudioKeys.prototype._offset = mapping._offset;\nAudioKeys.prototype._isNote = mapping._isNote;\nAudioKeys.prototype._toFrequency = mapping._toFrequency;\nAudioKeys.prototype._keyMap = mapping._keyMap; // buffer\n\nAudioKeys.prototype._addKey = buffer._addKey;\nAudioKeys.prototype._removeKey = buffer._removeKey;\nAudioKeys.prototype._isPressed = buffer._isPressed;\nAudioKeys.prototype._makeNote = buffer._makeNote;\nAudioKeys.prototype.clear = buffer.clear;\nAudioKeys.prototype._update = buffer._update;\nAudioKeys.prototype._diff = buffer._diff; // priority\n\nAudioKeys.prototype._prioritize = priority._prioritize;\nAudioKeys.prototype._last = priority._last;\nAudioKeys.prototype._first = priority._first;\nAudioKeys.prototype._highest = priority._highest;\nAudioKeys.prototype._lowest = priority._lowest; // special\n\nAudioKeys.prototype._isSpecialKey = special._isSpecialKey;\nAudioKeys.prototype._specialKey = special._specialKey;\nAudioKeys.prototype._specialKeyMap = special._specialKeyMap; // Browserify will take care of making this a global\n// in a browser environment without a build system.\n\nmodule.exports = AudioKeys;"],"sourceRoot":""}